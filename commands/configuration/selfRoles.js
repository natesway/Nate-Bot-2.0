const a32_0xdb07=['author','language','Command','findByIdAndUpdate','getString','catch','resolver','info','selfRoles','user','selfRoles\x20--add\x20ROLE','get','Constants','membershipLimitSelfRoles','has','roles','channel','test','PLATINUM','errors','send','add','fetchPremiumTier','roleNotFound','exec','guild','ROLE_NOT_FOUND','document','Self\x20Roles','SELF_ROLES','COLORS','remove','_id','default','length','PREMIUM_MEMBERSHIP_REQUIRED','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','selfRolesAdd','countDocuments','LIMITED_PREMIUM_MEMBERSHIP','exports','LIMITS','find','GOLD','push','apply','PremiumTier','DiscordError','client','../../utils/errors','cache','resolveRole','join','../../models/Role','IRIS','BASTION_ERROR_TYPE','RED','../../utils/constants','selfRoles\x20--remove\x20ROLE','MANAGE_ROLES','locale','tag','name'];(function(_0x5cc401,_0xdb07a4){const _0x5d8b76=function(_0x126b7a){while(--_0x126b7a){_0x5cc401['push'](_0x5cc401['shift']());}},_0x31f659=function(){const _0x57b64b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3d1a90,_0x22c3ce,_0x493d38,_0x2514fb){_0x2514fb=_0x2514fb||{};let _0x2b1f9b=_0x22c3ce+'='+_0x493d38,_0x5411c0=0x0;for(let _0x5d88c4=0x0,_0x59cac5=_0x3d1a90['length'];_0x5d88c4<_0x59cac5;_0x5d88c4++){const _0x546700=_0x3d1a90[_0x5d88c4];_0x2b1f9b+=';\x20'+_0x546700;const _0x449cfb=_0x3d1a90[_0x546700];_0x3d1a90['push'](_0x449cfb),_0x59cac5=_0x3d1a90['length'],_0x449cfb!==!![]&&(_0x2b1f9b+='='+_0x449cfb);}_0x2514fb['cookie']=_0x2b1f9b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x52ae71,_0x14131f){_0x52ae71=_0x52ae71||function(_0x53ea4d){return _0x53ea4d;};const _0x130b8c=_0x52ae71(new RegExp('(?:^|;\x20)'+_0x14131f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x27b771=function(_0x4e5fa7,_0x4086d2){_0x4e5fa7(++_0x4086d2);};return _0x27b771(_0x5d8b76,_0xdb07a4),_0x130b8c?decodeURIComponent(_0x130b8c[0x1]):undefined;}},_0x5abb6a=function(){const _0x58b764=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x58b764['test'](_0x57b64b['removeCookie']['toString']());};_0x57b64b['updateCookie']=_0x5abb6a;let _0x211a6f='';const _0x3e13a6=_0x57b64b['updateCookie']();if(!_0x3e13a6)_0x57b64b['setCookie'](['*'],'counter',0x1);else _0x3e13a6?_0x211a6f=_0x57b64b['getCookie'](null,'counter'):_0x57b64b['removeCookie']();};_0x31f659();}(a32_0xdb07,0x1ea));const a32_0x5d8b=function(_0x5cc401,_0xdb07a4){_0x5cc401=_0x5cc401-0x0;let _0x5d8b76=a32_0xdb07[_0x5cc401];return _0x5d8b76;};const a32_0x493d38=function(){let _0x2c374c=!![];return function(_0xa1eaa7,_0x3f14c7){const _0x171788=_0x2c374c?function(){if(_0x3f14c7){const _0x166821=_0x3f14c7[a32_0x5d8b('0x3b')](_0xa1eaa7,arguments);return _0x3f14c7=null,_0x166821;}}:function(){};return _0x2c374c=![],_0x171788;};}(),a32_0x22c3ce=a32_0x493d38(this,function(){const _0x48617f=function(){const _0x150a6=_0x48617f['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x150a6[a32_0x5d8b('0x1f')](a32_0x22c3ce);};return _0x48617f();});a32_0x22c3ce();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a32_0x5d8b('0x4')),constants=require(a32_0x5d8b('0x8')),errors=require(a32_0x5d8b('0x0')),omnic=require('../../utils/omnic');module[a32_0x5d8b('0x36')]=class SelfRoles extends tesseract_1[a32_0x5d8b('0x10')]{constructor(){super('selfRoles',{'description':a32_0x5d8b('0x32'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x5d8b('0x23'),'remove'],'string':[a32_0x5d8b('0x23'),a32_0x5d8b('0x2d')]},'scope':a32_0x5d8b('0x27'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a32_0x5d8b('0xa')],'syntax':[a32_0x5d8b('0x16'),a32_0x5d8b('0x18'),a32_0x5d8b('0x9')]}),this[a32_0x5d8b('0x26')]=async(_0x143d35,_0x289b5b)=>{if(_0x289b5b[a32_0x5d8b('0x23')]){if(constants['isPublicBastion'](this[a32_0x5d8b('0x3e')][a32_0x5d8b('0x17')])){const _0x542ef8=await Role_1['default'][a32_0x5d8b('0x34')]({'guild':_0x143d35[a32_0x5d8b('0x27')]['id'],'selfAssignable':!![]});if(_0x542ef8>=constants[a32_0x5d8b('0x37')][a32_0x5d8b('0x2b')]){const _0x90f18d=await omnic[a32_0x5d8b('0x24')](_0x143d35['guild'])[a32_0x5d8b('0x13')](()=>{});if(_0x90f18d){if(_0x90f18d===omnic['PremiumTier'][a32_0x5d8b('0x39')]&&_0x542ef8>=constants[a32_0x5d8b('0x37')][a32_0x5d8b('0x39')][a32_0x5d8b('0x2b')])throw new errors['DiscordError'](errors[a32_0x5d8b('0x6')][a32_0x5d8b('0x35')],this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')]['document']['language'],a32_0x5d8b('0x21'),a32_0x5d8b('0x1b'),constants[a32_0x5d8b('0x37')][a32_0x5d8b('0x39')][a32_0x5d8b('0x2b')]));else{if(_0x90f18d===omnic[a32_0x5d8b('0x3c')][a32_0x5d8b('0x20')]&&_0x542ef8>=constants[a32_0x5d8b('0x37')]['PLATINUM']['SELF_ROLES'])throw new errors[(a32_0x5d8b('0x3d'))](errors['BASTION_ERROR_TYPE'][a32_0x5d8b('0x35')],this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')]['getString'](_0x143d35[a32_0x5d8b('0x27')]['document'][a32_0x5d8b('0xf')],a32_0x5d8b('0x21'),a32_0x5d8b('0x1b'),constants[a32_0x5d8b('0x37')][a32_0x5d8b('0x20')][a32_0x5d8b('0x2b')]));}}else throw new errors[(a32_0x5d8b('0x3d'))](errors[a32_0x5d8b('0x6')][a32_0x5d8b('0x31')],this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')]['language'],a32_0x5d8b('0x21'),'premiumSelfRoles',constants[a32_0x5d8b('0x37')][a32_0x5d8b('0x2b')]));}}const _0x1dffa7=this[a32_0x5d8b('0x3e')]['resolver'][a32_0x5d8b('0x2')](_0x143d35[a32_0x5d8b('0x27')],_0x289b5b[a32_0x5d8b('0x23')][a32_0x5d8b('0x3')]('\x20'));if(!_0x1dffa7)throw new errors[(a32_0x5d8b('0x3d'))](errors['BASTION_ERROR_TYPE'][a32_0x5d8b('0x28')],this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')]['language'],'errors','roleNotFound'));await Role_1[a32_0x5d8b('0x2f')][a32_0x5d8b('0x11')](_0x1dffa7['id'],{'_id':_0x1dffa7['id'],'guild':_0x143d35['guild']['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x143d35['channel']['send']({'embed':{'color':tesseract_1[a32_0x5d8b('0x1a')][a32_0x5d8b('0x2c')]['GREEN'],'description':this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')][a32_0x5d8b('0xf')],a32_0x5d8b('0x15'),a32_0x5d8b('0x33'),_0x143d35[a32_0x5d8b('0xe')][a32_0x5d8b('0xc')],_0x1dffa7['name']),'footer':{'text':_0x1dffa7['id']}}})[a32_0x5d8b('0x13')](()=>{});}else{if(_0x289b5b['remove']){const _0xedb747=this[a32_0x5d8b('0x3e')][a32_0x5d8b('0x14')]['resolveRole'](_0x143d35['guild'],_0x289b5b['remove'][a32_0x5d8b('0x3')]('\x20'));if(!_0xedb747)throw new errors[(a32_0x5d8b('0x3d'))](errors[a32_0x5d8b('0x6')][a32_0x5d8b('0x28')],this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')][a32_0x5d8b('0xf')],'errors',a32_0x5d8b('0x25')));await Role_1['default']['findByIdAndUpdate'](_0xedb747['id'],{'$unset':{'selfAssignable':0x1}}),await _0x143d35[a32_0x5d8b('0x1e')][a32_0x5d8b('0x22')]({'embed':{'color':tesseract_1[a32_0x5d8b('0x1a')]['COLORS'][a32_0x5d8b('0x7')],'description':this[a32_0x5d8b('0x3e')]['locale'][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')]['language'],'info','selfRolesRemove',_0x143d35[a32_0x5d8b('0xe')][a32_0x5d8b('0xc')],_0xedb747[a32_0x5d8b('0xd')]),'footer':{'text':_0xedb747['id']}}})[a32_0x5d8b('0x13')](()=>{});}else{const _0x2e527c=await Role_1[a32_0x5d8b('0x2f')][a32_0x5d8b('0x38')]({'guild':_0x143d35[a32_0x5d8b('0x27')]['id'],'selfAssignable':!![]});if(!_0x2e527c[a32_0x5d8b('0x30')])throw new Error(this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')][a32_0x5d8b('0xf')],a32_0x5d8b('0x21'),'noSelfRoles'));const _0x235f55=[];for(const _0x458156 of _0x2e527c){!_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x1d')][a32_0x5d8b('0x1')][a32_0x5d8b('0x1c')](_0x458156[a32_0x5d8b('0x2e')])&&await _0x458156[a32_0x5d8b('0x2d')]()[a32_0x5d8b('0x13')](()=>{}),_0x235f55[a32_0x5d8b('0x3a')]({'name':_0x143d35['guild'][a32_0x5d8b('0x1d')][a32_0x5d8b('0x1')][a32_0x5d8b('0x19')](_0x458156[a32_0x5d8b('0x2e')])[a32_0x5d8b('0xd')]||'-','value':_0x458156['_id']});}await _0x143d35[a32_0x5d8b('0x1e')]['send']({'embed':{'color':tesseract_1['Constants'][a32_0x5d8b('0x2c')][a32_0x5d8b('0x5')],'title':a32_0x5d8b('0x2a'),'description':this[a32_0x5d8b('0x3e')][a32_0x5d8b('0xb')][a32_0x5d8b('0x12')](_0x143d35[a32_0x5d8b('0x27')][a32_0x5d8b('0x29')][a32_0x5d8b('0xf')],a32_0x5d8b('0x15'),'selfRolesList'),'fields':_0x235f55}})[a32_0x5d8b('0x13')](()=>{});}}};}};