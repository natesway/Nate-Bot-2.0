const a134_0x43c2=['react','messages','LIMITED_PREMIUM_MEMBERSHIP','timeout','cache','status','apply','membershipLimitPolls','poll','filter','PremiumTier','catch','membershipLimitPollTimeout','document','../../utils/numbers','map','fetchPremiumTier','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','reactions','premiumPollTimeout','now','COLORS','exports','LIMITS','Constants','\x20/\x20','locale','option','embeds','POLLS','poll\x20--status\x20POLL_MESSAGE_ID','channel','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','name','premiumPolls','../../utils/constants','fetch','guild','PREMIUM_MEMBERSHIP_REQUIRED','defaultTimeout','isPublicBastion','GOLD','DiscordError','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','user','default','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','MANAGE_CHANNELS','length','INVALID_COMMAND_SYNTAX','return\x20/\x22\x20+\x20this\x20+\x20\x22/','@bastion/tesseract','bot','PLATINUM','Ends','Command','value','findOne','channels','../../utils/omnic','POLL\x20STATUS','client','BASTION_ERROR_TYPE','send','../../utils/errors','errors','POLL','fields','users','exec','get','language','constructor','number','clamp','getString','POLL_NOT_FOUND','\x20votes\x20(','has','IRIS','POLL_TIMEOUT'];(function(_0x932273,_0x43c270){const _0x209fc6=function(_0x3dbf70){while(--_0x3dbf70){_0x932273['push'](_0x932273['shift']());}},_0x11fab0=function(){const _0x341334={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x547bc6,_0x413e44,_0x1df28a,_0x4437e6){_0x4437e6=_0x4437e6||{};let _0x2f7892=_0x413e44+'='+_0x1df28a,_0x14d2fb=0x0;for(let _0x1de4a5=0x0,_0x308129=_0x547bc6['length'];_0x1de4a5<_0x308129;_0x1de4a5++){const _0x2b8548=_0x547bc6[_0x1de4a5];_0x2f7892+=';\x20'+_0x2b8548;const _0x49fa2f=_0x547bc6[_0x2b8548];_0x547bc6['push'](_0x49fa2f),_0x308129=_0x547bc6['length'],_0x49fa2f!==!![]&&(_0x2f7892+='='+_0x49fa2f);}_0x4437e6['cookie']=_0x2f7892;},'removeCookie':function(){return'dev';},'getCookie':function(_0x13dafa,_0x5594c3){_0x13dafa=_0x13dafa||function(_0x2cb78a){return _0x2cb78a;};const _0x233d53=_0x13dafa(new RegExp('(?:^|;\x20)'+_0x5594c3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x39f0bb=function(_0x44d516,_0x18c0bf){_0x44d516(++_0x18c0bf);};return _0x39f0bb(_0x209fc6,_0x43c270),_0x233d53?decodeURIComponent(_0x233d53[0x1]):undefined;}},_0x18ea93=function(){const _0x124e75=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x124e75['test'](_0x341334['removeCookie']['toString']());};_0x341334['updateCookie']=_0x18ea93;let _0xdb61d2='';const _0x1d4ad1=_0x341334['updateCookie']();if(!_0x1d4ad1)_0x341334['setCookie'](['*'],'counter',0x1);else _0x1d4ad1?_0xdb61d2=_0x341334['getCookie'](null,'counter'):_0x341334['removeCookie']();};_0x11fab0();}(a134_0x43c2,0x8a));const a134_0x209f=function(_0x932273,_0x43c270){_0x932273=_0x932273-0x0;let _0x209fc6=a134_0x43c2[_0x932273];return _0x209fc6;};const a134_0x1df28a=function(){let _0x3b324f=!![];return function(_0xc92f1d,_0x249eac){const _0x24423d=_0x3b324f?function(){if(_0x249eac){const _0x48aca0=_0x249eac[a134_0x209f('0x1e')](_0xc92f1d,arguments);return _0x249eac=null,_0x48aca0;}}:function(){};return _0x3b324f=![],_0x24423d;};}(),a134_0x413e44=a134_0x1df28a(this,function(){const _0x598e92=function(){const _0x4d0d4c=_0x598e92[a134_0x209f('0xf')](a134_0x209f('0x4a'))()[a134_0x209f('0xf')](a134_0x209f('0x43'));return!_0x4d0d4c['test'](a134_0x413e44);};return _0x598e92();});a134_0x413e44();'use strict';const tesseract_1=require(a134_0x209f('0x4b')),Poll_1=require('../../models/Poll'),constants=require(a134_0x209f('0x3b')),errors=require(a134_0x209f('0x7')),numbers=require(a134_0x209f('0x26')),omnic=require(a134_0x209f('0x2'));module[a134_0x209f('0x2e')]=class PollCommand extends tesseract_1[a134_0x209f('0x4f')]{constructor(){super(a134_0x209f('0x20'),{'description':'It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a134_0x209f('0x1b')],'string':[a134_0x209f('0x33'),a134_0x209f('0x1d')],'coerce':{'timeout':_0x3e0166=>typeof _0x3e0166===a134_0x209f('0x10')&&numbers[a134_0x209f('0x11')](_0x3e0166,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a134_0x209f('0x47')],'syntax':[a134_0x209f('0x36'),a134_0x209f('0x46'),a134_0x209f('0x38')]}),this[a134_0x209f('0xc')]=async(_0x413a52,_0x185c48)=>{if(_0x185c48[a134_0x209f('0x1d')]){const _0x53009f=await Poll_1[a134_0x209f('0x45')][a134_0x209f('0x0')]({'_id':_0x185c48[a134_0x209f('0x1d')],'guild':_0x413a52[a134_0x209f('0x3d')]['id']});if(!_0x53009f)throw new Error(a134_0x209f('0x13'));if(!_0x413a52['guild'][a134_0x209f('0x1')]['cache'][a134_0x209f('0x15')](_0x53009f['channel']))throw new Error('POLL_NOT_FOUND');const _0x5b9348=_0x413a52[a134_0x209f('0x3d')][a134_0x209f('0x1')][a134_0x209f('0x1c')]['get'](_0x53009f['channel']),_0x4b3689=await _0x5b9348[a134_0x209f('0x19')][a134_0x209f('0x3c')](_0x53009f['_id'])[a134_0x209f('0x23')](()=>{});if(!_0x4b3689)throw new Error(a134_0x209f('0x13'));const _0x3965c8=_0x4b3689['embeds'][0x0][a134_0x209f('0xa')]['map'](_0x2cf613=>_0x2cf613[a134_0x209f('0x50')]),_0x2891e5={};let _0x3ff994=0x0;for(const _0x141f5f in this[a134_0x209f('0x2a')]['slice'](0x0,_0x3965c8[a134_0x209f('0x48')])){if(_0x4b3689[a134_0x209f('0x2a')][a134_0x209f('0x1c')]['has'](this[a134_0x209f('0x2a')][_0x141f5f])){await _0x4b3689[a134_0x209f('0x2a')][a134_0x209f('0x1c')][a134_0x209f('0xd')](this[a134_0x209f('0x2a')][_0x141f5f])[a134_0x209f('0xb')][a134_0x209f('0x3c')]()['catch'](()=>{});const _0x3b7a56=_0x4b3689[a134_0x209f('0x2a')][a134_0x209f('0x1c')][a134_0x209f('0xd')](this[a134_0x209f('0x2a')][_0x141f5f])[a134_0x209f('0xb')]['cache'][a134_0x209f('0x21')](_0x9492ec=>!_0x9492ec[a134_0x209f('0x4c')])['size'];_0x2891e5[this['reactions'][_0x141f5f]]=_0x3b7a56,_0x3ff994+=_0x3b7a56;}}return await _0x413a52['channel'][a134_0x209f('0x6')]({'embed':{'color':tesseract_1[a134_0x209f('0x30')][a134_0x209f('0x2d')][a134_0x209f('0x16')],'author':{'name':a134_0x209f('0x3')},'title':_0x4b3689[a134_0x209f('0x34')][0x0]['title'],'fields':_0x4b3689[a134_0x209f('0x34')][0x0][a134_0x209f('0xa')][a134_0x209f('0x27')](_0x263245=>({'name':_0x263245[a134_0x209f('0x39')]+'\x20'+_0x263245[a134_0x209f('0x50')],'value':(_0x2891e5[_0x263245[a134_0x209f('0x39')]]||0x0)+a134_0x209f('0x31')+_0x3ff994+a134_0x209f('0x14')+(_0x2891e5[_0x263245['name']]?_0x2891e5[_0x263245[a134_0x209f('0x39')]]/_0x3ff994*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':_0x4b3689['id']+'\x20â€¢\x20Ends'},'timestamp':_0x53009f['ends']}});}if(!_0x185c48['_']['length']||!_0x185c48['option']||!(_0x185c48[a134_0x209f('0x33')]instanceof Array))throw new errors['DiscordError'](errors[a134_0x209f('0x5')][a134_0x209f('0x49')],this['name']);const _0x2a19df=_0x185c48['_']['join']('\x20'),_0x1bd2c0=_0x185c48['timeout']?_0x185c48['timeout']:this[a134_0x209f('0x3f')];if(constants[a134_0x209f('0x40')](this[a134_0x209f('0x4')][a134_0x209f('0x44')])){const _0x50b21e=await omnic[a134_0x209f('0x28')](_0x413a52[a134_0x209f('0x3d')])[a134_0x209f('0x23')](()=>{});if(_0x50b21e){if(_0x50b21e===omnic[a134_0x209f('0x22')]['GOLD']&&_0x1bd2c0>constants['LIMITS'][a134_0x209f('0x41')][a134_0x209f('0x17')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a134_0x209f('0x1a')],this[a134_0x209f('0x4')][a134_0x209f('0x32')][a134_0x209f('0x12')](_0x413a52[a134_0x209f('0x3d')][a134_0x209f('0x25')][a134_0x209f('0xe')],a134_0x209f('0x8'),a134_0x209f('0x24'),constants['LIMITS'][a134_0x209f('0x41')]['POLL_TIMEOUT']));else{if(_0x50b21e===omnic[a134_0x209f('0x22')][a134_0x209f('0x4d')]&&_0x1bd2c0>constants['LIMITS'][a134_0x209f('0x4d')]['POLL_TIMEOUT'])throw new errors[(a134_0x209f('0x42'))](errors['BASTION_ERROR_TYPE'][a134_0x209f('0x1a')],this[a134_0x209f('0x4')][a134_0x209f('0x32')]['getString'](_0x413a52['guild'][a134_0x209f('0x25')][a134_0x209f('0xe')],a134_0x209f('0x8'),a134_0x209f('0x24'),constants['LIMITS'][a134_0x209f('0x4d')]['POLL_TIMEOUT']));}}else{if(_0x1bd2c0>constants['LIMITS'][a134_0x209f('0x17')])throw new errors['DiscordError'](errors[a134_0x209f('0x5')][a134_0x209f('0x3e')],this[a134_0x209f('0x4')][a134_0x209f('0x32')][a134_0x209f('0x12')](_0x413a52['guild']['document'][a134_0x209f('0xe')],'errors',a134_0x209f('0x2b'),constants[a134_0x209f('0x2f')][a134_0x209f('0x17')]));}const _0x58f03c=await Poll_1[a134_0x209f('0x45')]['countDocuments']({'guild':_0x413a52[a134_0x209f('0x3d')]['id'],'ends':{'$gte':new Date()}});if(_0x50b21e){if(_0x50b21e===omnic['PremiumTier'][a134_0x209f('0x41')]&&_0x58f03c>=constants[a134_0x209f('0x2f')][a134_0x209f('0x41')][a134_0x209f('0x35')])throw new errors['DiscordError'](errors[a134_0x209f('0x5')][a134_0x209f('0x1a')],this['client']['locale']['getString'](_0x413a52['guild'][a134_0x209f('0x25')][a134_0x209f('0xe')],a134_0x209f('0x8'),a134_0x209f('0x1f'),constants['LIMITS']['GOLD'][a134_0x209f('0x35')]));else{if(_0x50b21e===omnic[a134_0x209f('0x22')][a134_0x209f('0x4d')]&&_0x58f03c>=constants['LIMITS'][a134_0x209f('0x4d')]['POLLS'])throw new errors[(a134_0x209f('0x42'))](errors[a134_0x209f('0x5')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a134_0x209f('0x4')]['locale']['getString'](_0x413a52[a134_0x209f('0x3d')][a134_0x209f('0x25')][a134_0x209f('0xe')],a134_0x209f('0x8'),a134_0x209f('0x1f'),constants[a134_0x209f('0x2f')][a134_0x209f('0x4d')]['POLLS']));}}else{if(_0x58f03c>=constants[a134_0x209f('0x2f')][a134_0x209f('0x35')])throw new errors[(a134_0x209f('0x42'))](errors[a134_0x209f('0x5')][a134_0x209f('0x3e')],this[a134_0x209f('0x4')][a134_0x209f('0x32')]['getString'](_0x413a52[a134_0x209f('0x3d')][a134_0x209f('0x25')][a134_0x209f('0xe')],a134_0x209f('0x8'),a134_0x209f('0x3a'),constants[a134_0x209f('0x2f')][a134_0x209f('0x35')]));}}const _0x3e5749=new Date(Date[a134_0x209f('0x2c')]()+_0x1bd2c0*0x36ee80),_0x2937ba=await _0x413a52[a134_0x209f('0x37')][a134_0x209f('0x6')]({'embed':{'color':tesseract_1[a134_0x209f('0x30')][a134_0x209f('0x2d')][a134_0x209f('0x16')],'author':{'name':a134_0x209f('0x9')},'title':_0x2a19df,'description':a134_0x209f('0x29'),'fields':_0x185c48['option']['map']((_0x51635a,_0x3528fa)=>({'name':this['reactions'][_0x3528fa],'value':_0x51635a})),'footer':{'text':a134_0x209f('0x4e')},'timestamp':_0x3e5749}});await Poll_1[a134_0x209f('0x45')]['create']({'_id':_0x2937ba['id'],'channel':_0x2937ba[a134_0x209f('0x37')]['id'],'guild':_0x2937ba[a134_0x209f('0x3d')]['id'],'ends':_0x3e5749});for(const _0x5bf2d1 of this[a134_0x209f('0x2a')]['slice'](0x0,_0x185c48[a134_0x209f('0x33')]['length'])){await _0x2937ba[a134_0x209f('0x18')](_0x5bf2d1)['catch'](()=>{});}},this[a134_0x209f('0x2a')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a134_0x209f('0x3f')]=0x3;}};