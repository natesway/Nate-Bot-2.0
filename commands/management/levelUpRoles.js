const a66_0x59bc=['clamp','Constants','language','tag','locale','../../models/Role','resolver','save','user','Level-Up\x20Roles','return\x20/\x22\x20+\x20this\x20+\x20\x22/','push','GOLD','name','map','find','remove','client','IRIS','levelUpRoles\x20--level\x20NUMBER\x20--remove','info','document','roleNotFound','NO_ROLES_FOR_LEVEL','cache','Level\x20','guild','isPublicBastion','resolveRoles','COLORS','../../utils/errors','join','ROLE_LEVELS','LIMITS','roles','DiscordError','_id','role','length','MAX_LEVEL','default','constructor','PremiumTier','NO_LEVEL_UP_ROLES','fetchPremiumTier','membershipLimitRoleLevels','roleLevelClear','catch','MANAGE_ROLES','errors','Command','author','resolveRole','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','premiumRoleLevels','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','keys','countDocuments','get','getString','exec','fetchDocument','levelUpRoles\x20--level\x20NUMBER','PLATINUM','channel','GREEN','apply','exports','has','ROLES_PER_LEVEL','membershipLimitLevelRoles','LIMITED_PREMIUM_MEMBERSHIP','BASTION_ERROR_TYPE','level','levelUpRoles','send','PREMIUM_MEMBERSHIP_REQUIRED','../../utils/gamification'];(function(_0x1b122b,_0x59bc08){const _0x5bf648=function(_0xd0345a){while(--_0xd0345a){_0x1b122b['push'](_0x1b122b['shift']());}},_0x4fd7a7=function(){const _0x35a42c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b3935,_0x39603a,_0x171330,_0x116602){_0x116602=_0x116602||{};let _0x3b68b8=_0x39603a+'='+_0x171330,_0x2fdc88=0x0;for(let _0x362574=0x0,_0x3845ae=_0x3b3935['length'];_0x362574<_0x3845ae;_0x362574++){const _0x45bf66=_0x3b3935[_0x362574];_0x3b68b8+=';\x20'+_0x45bf66;const _0x5b7a0c=_0x3b3935[_0x45bf66];_0x3b3935['push'](_0x5b7a0c),_0x3845ae=_0x3b3935['length'],_0x5b7a0c!==!![]&&(_0x3b68b8+='='+_0x5b7a0c);}_0x116602['cookie']=_0x3b68b8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5287d3,_0x2d4a7e){_0x5287d3=_0x5287d3||function(_0x25c53b){return _0x25c53b;};const _0x4fd5b9=_0x5287d3(new RegExp('(?:^|;\x20)'+_0x2d4a7e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x383e3f=function(_0x5bbca0,_0x4a62f6){_0x5bbca0(++_0x4a62f6);};return _0x383e3f(_0x5bf648,_0x59bc08),_0x4fd5b9?decodeURIComponent(_0x4fd5b9[0x1]):undefined;}},_0x240a91=function(){const _0x44212e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x44212e['test'](_0x35a42c['removeCookie']['toString']());};_0x35a42c['updateCookie']=_0x240a91;let _0x268a0a='';const _0x68b396=_0x35a42c['updateCookie']();if(!_0x68b396)_0x35a42c['setCookie'](['*'],'counter',0x1);else _0x68b396?_0x268a0a=_0x35a42c['getCookie'](null,'counter'):_0x35a42c['removeCookie']();};_0x4fd7a7();}(a66_0x59bc,0xd5));const a66_0x5bf6=function(_0x1b122b,_0x59bc08){_0x1b122b=_0x1b122b-0x0;let _0x5bf648=a66_0x59bc[_0x1b122b];return _0x5bf648;};const a66_0x171330=function(){let _0x45bf99=!![];return function(_0xd7ca10,_0x5949a5){const _0x487fd5=_0x45bf99?function(){if(_0x5949a5){const _0x21ad2f=_0x5949a5[a66_0x5bf6('0x9')](_0xd7ca10,arguments);return _0x5949a5=null,_0x21ad2f;}}:function(){};return _0x45bf99=![],_0x487fd5;};}(),a66_0x39603a=a66_0x171330(this,function(){const _0x7fe897=function(){const _0x1e577d=_0x7fe897[a66_0x5bf6('0x3e')](a66_0x5bf6('0x1f'))()[a66_0x5bf6('0x3e')](a66_0x5bf6('0x4c'));return!_0x1e577d['test'](a66_0x39603a);};return _0x7fe897();});a66_0x39603a();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a66_0x5bf6('0x1a')),constants=require('../../utils/constants'),errors=require(a66_0x5bf6('0x33')),gamification=require(a66_0x5bf6('0x14')),numbers=require('../../utils/numbers'),omnic=require('../../utils/omnic');module[a66_0x5bf6('0xa')]=class LevelUpRolesCommand extends tesseract_1[a66_0x5bf6('0x47')]{constructor(){super(a66_0x5bf6('0x11'),{'description':a66_0x5bf6('0x4a'),'triggers':[],'arguments':{'array':[a66_0x5bf6('0x3a')],'boolean':['remove'],'string':['role'],'number':[a66_0x5bf6('0x10')],'coerce':{'level':_0x2bafcb=>numbers[a66_0x5bf6('0x15')](_0x2bafcb,0x1,gamification[a66_0x5bf6('0x3c')])}},'scope':a66_0x5bf6('0x2f'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a66_0x5bf6('0x45')],'userPermissions':[a66_0x5bf6('0x45')],'syntax':[a66_0x5bf6('0x11'),a66_0x5bf6('0x5'),'levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE',a66_0x5bf6('0x28')]}),this[a66_0x5bf6('0x3')]=async(_0x311d89,_0x5739e4)=>{if(_0x5739e4[a66_0x5bf6('0x10')]){if(_0x5739e4[a66_0x5bf6('0x3a')]){if(constants[a66_0x5bf6('0x30')](this[a66_0x5bf6('0x26')][a66_0x5bf6('0x1d')])){const _0x130d8e=await omnic[a66_0x5bf6('0x41')](_0x311d89['guild'])[a66_0x5bf6('0x44')](()=>{}),_0x5f474f=await Role_1['default']['distinct'](a66_0x5bf6('0x10'),{'guild':_0x311d89[a66_0x5bf6('0x2f')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x130d8e){if(_0x130d8e===omnic[a66_0x5bf6('0x3f')]['GOLD']&&_0x5f474f[a66_0x5bf6('0x3b')]>=constants['LIMITS']['GOLD']['ROLE_LEVELS'])throw new errors[(a66_0x5bf6('0x38'))](errors[a66_0x5bf6('0xf')][a66_0x5bf6('0xe')],this[a66_0x5bf6('0x26')]['locale'][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x2a')]['language'],'errors',a66_0x5bf6('0x42'),constants['LIMITS'][a66_0x5bf6('0x21')][a66_0x5bf6('0x35')]));else{if(_0x130d8e===omnic[a66_0x5bf6('0x3f')][a66_0x5bf6('0x6')]&&_0x5f474f['length']>=constants[a66_0x5bf6('0x36')][a66_0x5bf6('0x6')][a66_0x5bf6('0x35')])throw new errors[(a66_0x5bf6('0x38'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a66_0x5bf6('0x26')][a66_0x5bf6('0x19')][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')]['document'][a66_0x5bf6('0x17')],'errors','membershipLimitRoleLevels',constants[a66_0x5bf6('0x36')][a66_0x5bf6('0x6')]['ROLE_LEVELS']));}}else{if(_0x5f474f[a66_0x5bf6('0x3b')]>=constants[a66_0x5bf6('0x36')][a66_0x5bf6('0x35')])throw new errors[(a66_0x5bf6('0x38'))](errors[a66_0x5bf6('0xf')][a66_0x5bf6('0x13')],this[a66_0x5bf6('0x26')][a66_0x5bf6('0x19')][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')]['document'][a66_0x5bf6('0x17')],a66_0x5bf6('0x46'),a66_0x5bf6('0x4b'),constants[a66_0x5bf6('0x36')][a66_0x5bf6('0x35')]));}const _0x341b37=await Role_1[a66_0x5bf6('0x3d')][a66_0x5bf6('0x0')]({'guild':_0x311d89[a66_0x5bf6('0x2f')]['id'],'level':_0x5739e4[a66_0x5bf6('0x10')]});if(_0x130d8e){if(_0x130d8e===omnic[a66_0x5bf6('0x3f')][a66_0x5bf6('0x21')]&&_0x341b37>=constants['LIMITS'][a66_0x5bf6('0x21')][a66_0x5bf6('0xc')])throw new errors['DiscordError'](errors[a66_0x5bf6('0xf')][a66_0x5bf6('0xe')],this[a66_0x5bf6('0x26')][a66_0x5bf6('0x19')][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x2a')][a66_0x5bf6('0x17')],a66_0x5bf6('0x46'),'membershipLimitLevelRoles',constants[a66_0x5bf6('0x36')][a66_0x5bf6('0x21')][a66_0x5bf6('0xc')]));else{if(_0x130d8e===omnic[a66_0x5bf6('0x3f')][a66_0x5bf6('0x6')]&&_0x341b37>=constants[a66_0x5bf6('0x36')]['PLATINUM'][a66_0x5bf6('0xc')])throw new errors[(a66_0x5bf6('0x38'))](errors[a66_0x5bf6('0xf')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a66_0x5bf6('0x26')][a66_0x5bf6('0x19')][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x2a')]['language'],'errors',a66_0x5bf6('0xd'),constants[a66_0x5bf6('0x36')][a66_0x5bf6('0x6')][a66_0x5bf6('0xc')]));}}else{if(_0x341b37>=constants[a66_0x5bf6('0x36')][a66_0x5bf6('0xc')])throw new errors[(a66_0x5bf6('0x38'))](errors[a66_0x5bf6('0xf')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a66_0x5bf6('0x26')]['locale'][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x2a')][a66_0x5bf6('0x17')],a66_0x5bf6('0x46'),'premiumLevelRoles',constants[a66_0x5bf6('0x36')][a66_0x5bf6('0xc')]));}}const _0x32d94f=this[a66_0x5bf6('0x26')][a66_0x5bf6('0x1b')][a66_0x5bf6('0x49')](_0x311d89['guild'],_0x5739e4[a66_0x5bf6('0x3a')][a66_0x5bf6('0x34')]('\x20'));if(!_0x32d94f)throw new errors[(a66_0x5bf6('0x38'))](errors[a66_0x5bf6('0xf')]['ROLE_NOT_FOUND'],this['client'][a66_0x5bf6('0x19')][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')]['document'][a66_0x5bf6('0x17')],'error',a66_0x5bf6('0x2b')));let _0x35334e=await _0x32d94f[a66_0x5bf6('0x4')]();return!_0x35334e&&(_0x35334e=await _0x32d94f['createDocument']()),_0x35334e['level']=_0x5739e4[a66_0x5bf6('0x10')],await _0x35334e[a66_0x5bf6('0x1c')](),await _0x311d89[a66_0x5bf6('0x7')]['send']({'embed':{'color':tesseract_1[a66_0x5bf6('0x16')][a66_0x5bf6('0x32')][a66_0x5bf6('0x8')],'description':this[a66_0x5bf6('0x26')][a66_0x5bf6('0x19')][a66_0x5bf6('0x2')](_0x311d89[a66_0x5bf6('0x2f')]['document'][a66_0x5bf6('0x17')],a66_0x5bf6('0x29'),'roleLevelAdd',_0x311d89[a66_0x5bf6('0x48')][a66_0x5bf6('0x18')],_0x32d94f['name'],_0x5739e4['level'])}})[a66_0x5bf6('0x44')](()=>{});}if(_0x5739e4[a66_0x5bf6('0x25')])return await Role_1['default']['updateMany']({'guild':_0x311d89['guild']['id'],'level':_0x5739e4[a66_0x5bf6('0x10')]},{'$unset':{'level':0x1}}),await _0x311d89[a66_0x5bf6('0x7')][a66_0x5bf6('0x12')]({'embed':{'color':tesseract_1[a66_0x5bf6('0x16')]['COLORS']['RED'],'description':this['client'][a66_0x5bf6('0x19')]['getString'](_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x2a')][a66_0x5bf6('0x17')],a66_0x5bf6('0x29'),a66_0x5bf6('0x43'),_0x311d89[a66_0x5bf6('0x48')][a66_0x5bf6('0x18')],_0x5739e4[a66_0x5bf6('0x10')])}})[a66_0x5bf6('0x44')](()=>{});const _0x4cee85=await Role_1[a66_0x5bf6('0x3d')][a66_0x5bf6('0x24')]({'guild':_0x311d89[a66_0x5bf6('0x2f')]['id'],'level':_0x5739e4['level']});if(!_0x4cee85[a66_0x5bf6('0x3b')])throw new Error(a66_0x5bf6('0x2c'));const _0x525ee3=this[a66_0x5bf6('0x26')][a66_0x5bf6('0x1b')][a66_0x5bf6('0x31')](_0x311d89['guild'],_0x4cee85['map'](_0x1b2d4f=>_0x1b2d4f[a66_0x5bf6('0x39')]));return await _0x311d89[a66_0x5bf6('0x7')][a66_0x5bf6('0x12')]({'embed':{'color':tesseract_1['Constants'][a66_0x5bf6('0x32')][a66_0x5bf6('0x27')],'title':a66_0x5bf6('0x2e')+_0x5739e4[a66_0x5bf6('0x10')],'fields':[{'name':'Roles','value':_0x525ee3[a66_0x5bf6('0x23')](_0x493561=>_0x493561['name'])[a66_0x5bf6('0x34')]('\x0a')}]}})[a66_0x5bf6('0x44')](()=>{});}const _0x16ea55=await Role_1[a66_0x5bf6('0x3d')][a66_0x5bf6('0x24')]({'guild':_0x311d89[a66_0x5bf6('0x2f')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x16ea55[a66_0x5bf6('0x3b')])throw new Error(a66_0x5bf6('0x40'));const _0x1bb842={};for(const _0x182513 of _0x16ea55){_0x182513[a66_0x5bf6('0x10')]in _0x1bb842?_0x1bb842[_0x182513['level']][a66_0x5bf6('0x20')](_0x182513[a66_0x5bf6('0x39')]):_0x1bb842[_0x182513[a66_0x5bf6('0x10')]]=[_0x182513[a66_0x5bf6('0x39')]];}return await _0x311d89['channel'][a66_0x5bf6('0x12')]({'embed':{'color':tesseract_1[a66_0x5bf6('0x16')][a66_0x5bf6('0x32')][a66_0x5bf6('0x27')],'title':a66_0x5bf6('0x1e'),'fields':Object[a66_0x5bf6('0x4d')](_0x1bb842)[a66_0x5bf6('0x23')](_0x3cf056=>({'name':a66_0x5bf6('0x2e')+_0x3cf056,'value':_0x1bb842[_0x3cf056][a66_0x5bf6('0x23')](_0xb3f3fc=>_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x37')][a66_0x5bf6('0x2d')][a66_0x5bf6('0xb')](_0xb3f3fc)?_0x311d89[a66_0x5bf6('0x2f')][a66_0x5bf6('0x37')]['cache'][a66_0x5bf6('0x1')](_0xb3f3fc)[a66_0x5bf6('0x22')]:_0xb3f3fc)['join'](',\x20')}))}})[a66_0x5bf6('0x44')](()=>{});};}};