const a71_0x5790=['length','It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','LIMITS','GOLD','PREMIUM_MEMBERSHIP_REQUIRED','return\x20/\x22\x20+\x20this\x20+\x20\x22/','membershipLimitPaidRoles','document','info','error','findOneAndUpdate','../../utils/errors','has','ROLE_NOT_FOR_SALE','LIMITED_PREMIUM_MEMBERSHIP','tag','member','premiumPaidRoles','countDocuments','errors','Command','locale','../../models/Role','PLATINUM','Constants','IRIS','add','RED','PremiumTier','default','MAX_SAFE_INTEGER','constructor','roleStore','sell','Roles\x20Store','user','roles','price','isPublicBastion','save','resolver','unlist','GREEN','buy','../../utils/omnic','debit','@bastion/tesseract','roleStore\x20ROLE\x20--unlist','find','get','language','../../utils/numbers','permissions','ROLE_NOT_FOUND','client','MANAGE_ROLES','send','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','COLORS','channel','NO_PERMISSION','DiscordError','fetchPremiumTier','roleStore\x20ROLE\x20--sell\x20AMOUNT','exports','INSUFFICIENT_BALANCE','apply','findOne','../../utils/constants','roleNotFound','Paid\x20Role','\x20Bastion\x20Coins','ROLE_ALREADY_ASSIGNED','roleStore\x20ROLE\x20--buy','guild','join','cache','_id','resolveRole','catch','name','getString','PAID_ROLES','author','exec','clamp','map'];(function(_0x18aebf,_0x57908c){const _0x5ea8f7=function(_0x522d92){while(--_0x522d92){_0x18aebf['push'](_0x18aebf['shift']());}},_0x315f5a=function(){const _0x3d8623={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4f5c25,_0x561a9a,_0x18ad52,_0x24dc7a){_0x24dc7a=_0x24dc7a||{};let _0x83f138=_0x561a9a+'='+_0x18ad52,_0x2434f8=0x0;for(let _0x153e31=0x0,_0x31c791=_0x4f5c25['length'];_0x153e31<_0x31c791;_0x153e31++){const _0x1f7e2c=_0x4f5c25[_0x153e31];_0x83f138+=';\x20'+_0x1f7e2c;const _0x4f6492=_0x4f5c25[_0x1f7e2c];_0x4f5c25['push'](_0x4f6492),_0x31c791=_0x4f5c25['length'],_0x4f6492!==!![]&&(_0x83f138+='='+_0x4f6492);}_0x24dc7a['cookie']=_0x83f138;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3eef9a,_0x7ff1ac){_0x3eef9a=_0x3eef9a||function(_0x26bb6f){return _0x26bb6f;};const _0x2e356b=_0x3eef9a(new RegExp('(?:^|;\x20)'+_0x7ff1ac['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2f9dd1=function(_0x2a56ab,_0x114645){_0x2a56ab(++_0x114645);};return _0x2f9dd1(_0x5ea8f7,_0x57908c),_0x2e356b?decodeURIComponent(_0x2e356b[0x1]):undefined;}},_0x1c0352=function(){const _0x131cce=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x131cce['test'](_0x3d8623['removeCookie']['toString']());};_0x3d8623['updateCookie']=_0x1c0352;let _0x1c1319='';const _0xad49ff=_0x3d8623['updateCookie']();if(!_0xad49ff)_0x3d8623['setCookie'](['*'],'counter',0x1);else _0xad49ff?_0x1c1319=_0x3d8623['getCookie'](null,'counter'):_0x3d8623['removeCookie']();};_0x315f5a();}(a71_0x5790,0xcb));const a71_0x5ea8=function(_0x18aebf,_0x57908c){_0x18aebf=_0x18aebf-0x0;let _0x5ea8f7=a71_0x5790[_0x18aebf];return _0x5ea8f7;};const a71_0x18ad52=function(){let _0x21875e=!![];return function(_0x3d345e,_0x2dc36d){const _0x41250b=_0x21875e?function(){if(_0x2dc36d){const _0x3a68c5=_0x2dc36d[a71_0x5ea8('0x25')](_0x3d345e,arguments);return _0x2dc36d=null,_0x3a68c5;}}:function(){};return _0x21875e=![],_0x41250b;};}(),a71_0x561a9a=a71_0x18ad52(this,function(){const _0x3bf009=function(){const _0x4a8ade=_0x3bf009[a71_0x5ea8('0x2')](a71_0x5ea8('0x3f'))()[a71_0x5ea8('0x2')](a71_0x5ea8('0x1c'));return!_0x4a8ade['test'](a71_0x561a9a);};return _0x3bf009();});a71_0x561a9a();'use strict';const tesseract_1=require(a71_0x5ea8('0x11')),Role_1=require(a71_0x5ea8('0x50')),constants=require(a71_0x5ea8('0x27')),errors=require(a71_0x5ea8('0x45')),numbers=require(a71_0x5ea8('0x16')),omnic=require(a71_0x5ea8('0xf'));module[a71_0x5ea8('0x23')]=class RoleStoreCommand extends tesseract_1[a71_0x5ea8('0x4e')]{constructor(){super(a71_0x5ea8('0x3'),{'description':a71_0x5ea8('0x3b'),'triggers':[],'arguments':{'boolean':[a71_0x5ea8('0xe'),'unlist'],'number':[a71_0x5ea8('0x4')],'coerce':{'sell':_0x2f557d=>numbers[a71_0x5ea8('0x38')](_0x2f557d,0x1,Number[a71_0x5ea8('0x1')])}},'scope':a71_0x5ea8('0x2d'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a71_0x5ea8('0x1a')],'userPermissions':[],'syntax':[a71_0x5ea8('0x3'),a71_0x5ea8('0x22'),a71_0x5ea8('0x2c'),a71_0x5ea8('0x12')]}),this[a71_0x5ea8('0x37')]=async(_0x2435f1,_0x1b6246)=>{if(_0x1b6246['_'][a71_0x5ea8('0x3a')]){const _0x2110d3=this['client'][a71_0x5ea8('0xb')][a71_0x5ea8('0x31')](_0x2435f1[a71_0x5ea8('0x2d')],_0x1b6246['_'][a71_0x5ea8('0x2e')]('\x20'));if(!_0x2110d3)throw new errors[(a71_0x5ea8('0x20'))](errors['BASTION_ERROR_TYPE'][a71_0x5ea8('0x18')],this['client'][a71_0x5ea8('0x4f')][a71_0x5ea8('0x34')](_0x2435f1['guild'][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],a71_0x5ea8('0x43'),a71_0x5ea8('0x28')));if(_0x1b6246[a71_0x5ea8('0x4')]>0x0){if(constants[a71_0x5ea8('0x9')](this[a71_0x5ea8('0x19')][a71_0x5ea8('0x6')])){const _0x42c594=await Role_1[a71_0x5ea8('0x0')][a71_0x5ea8('0x4c')]({'guild':_0x2435f1['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(_0x42c594>=constants[a71_0x5ea8('0x3c')][a71_0x5ea8('0x35')]){const _0x4bd280=await omnic[a71_0x5ea8('0x21')](_0x2435f1[a71_0x5ea8('0x2d')])[a71_0x5ea8('0x32')](()=>{});if(_0x4bd280){if(_0x4bd280===omnic[a71_0x5ea8('0x56')][a71_0x5ea8('0x3d')]&&_0x42c594>=constants['LIMITS']['GOLD'][a71_0x5ea8('0x35')])throw new errors[(a71_0x5ea8('0x20'))](errors['BASTION_ERROR_TYPE'][a71_0x5ea8('0x48')],this['client'][a71_0x5ea8('0x4f')][a71_0x5ea8('0x34')](_0x2435f1[a71_0x5ea8('0x2d')][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],a71_0x5ea8('0x4d'),a71_0x5ea8('0x40'),constants[a71_0x5ea8('0x3c')][a71_0x5ea8('0x3d')][a71_0x5ea8('0x35')]));else{if(_0x4bd280===omnic[a71_0x5ea8('0x56')][a71_0x5ea8('0x51')]&&_0x42c594>=constants[a71_0x5ea8('0x3c')]['PLATINUM'][a71_0x5ea8('0x35')])throw new errors[(a71_0x5ea8('0x20'))](errors['BASTION_ERROR_TYPE'][a71_0x5ea8('0x48')],this[a71_0x5ea8('0x19')][a71_0x5ea8('0x4f')][a71_0x5ea8('0x34')](_0x2435f1['guild'][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],a71_0x5ea8('0x4d'),a71_0x5ea8('0x40'),constants[a71_0x5ea8('0x3c')][a71_0x5ea8('0x51')]['PAID_ROLES']));}}else throw new errors[(a71_0x5ea8('0x20'))](errors['BASTION_ERROR_TYPE'][a71_0x5ea8('0x3e')],this[a71_0x5ea8('0x19')][a71_0x5ea8('0x4f')]['getString'](_0x2435f1[a71_0x5ea8('0x2d')][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],'errors',a71_0x5ea8('0x4b'),constants[a71_0x5ea8('0x3c')]['PAID_ROLES']));}}if(!_0x2435f1[a71_0x5ea8('0x4a')][a71_0x5ea8('0x17')][a71_0x5ea8('0x46')](a71_0x5ea8('0x1a')))throw new Error(a71_0x5ea8('0x1f'));return await Role_1['default'][a71_0x5ea8('0x44')]({'_id':_0x2110d3['id'],'guild':_0x2435f1[a71_0x5ea8('0x2d')]['id']},{'_id':_0x2110d3['id'],'guild':_0x2435f1[a71_0x5ea8('0x2d')]['id'],'price':_0x1b6246[a71_0x5ea8('0x4')]},{'upsert':!![]}),await _0x2435f1['channel'][a71_0x5ea8('0x1b')]({'embed':{'color':tesseract_1['Constants'][a71_0x5ea8('0x1d')]['GREEN'],'description':this['client'][a71_0x5ea8('0x4f')][a71_0x5ea8('0x34')](_0x2435f1[a71_0x5ea8('0x2d')][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],'info','roleStoreAdd',_0x2435f1['author']['tag'],_0x2110d3[a71_0x5ea8('0x33')],_0x1b6246[a71_0x5ea8('0x4')])}})['catch'](()=>{});}if(_0x1b6246[a71_0x5ea8('0xe')]){if(_0x2435f1[a71_0x5ea8('0x4a')][a71_0x5ea8('0x7')][a71_0x5ea8('0x2f')][a71_0x5ea8('0x46')](_0x2110d3['id']))throw new Error(a71_0x5ea8('0x2b'));const _0x3e8ead=await Role_1['default'][a71_0x5ea8('0x26')]({'_id':_0x2110d3['id'],'guild':_0x2435f1['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x3e8ead)throw new Error(a71_0x5ea8('0x47'));if(_0x2435f1[a71_0x5ea8('0x4a')][a71_0x5ea8('0x41')]['balance']<_0x3e8ead[a71_0x5ea8('0x8')])throw new Error(a71_0x5ea8('0x24'));return await _0x2435f1['member'][a71_0x5ea8('0x7')][a71_0x5ea8('0x54')](_0x2110d3),_0x2435f1[a71_0x5ea8('0x4a')][a71_0x5ea8('0x10')](_0x3e8ead[a71_0x5ea8('0x8')],a71_0x5ea8('0x29'),_0x2435f1[a71_0x5ea8('0x4a')]['document']),await _0x2435f1['member']['document'][a71_0x5ea8('0xa')](),await _0x2435f1[a71_0x5ea8('0x1e')]['send']({'embed':{'color':tesseract_1[a71_0x5ea8('0x52')][a71_0x5ea8('0x1d')][a71_0x5ea8('0xd')],'description':this[a71_0x5ea8('0x19')][a71_0x5ea8('0x4f')][a71_0x5ea8('0x34')](_0x2435f1[a71_0x5ea8('0x2d')][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],a71_0x5ea8('0x42'),'roleBought',_0x2435f1[a71_0x5ea8('0x36')][a71_0x5ea8('0x49')],_0x2110d3[a71_0x5ea8('0x33')],_0x3e8ead[a71_0x5ea8('0x8')])}})[a71_0x5ea8('0x32')](()=>{});}if(_0x1b6246[a71_0x5ea8('0xc')]){if(!_0x2435f1['member'][a71_0x5ea8('0x17')][a71_0x5ea8('0x46')](a71_0x5ea8('0x1a')))throw new Error(a71_0x5ea8('0x1f'));return await Role_1['default'][a71_0x5ea8('0x44')]({'_id':_0x2110d3['id'],'guild':_0x2435f1[a71_0x5ea8('0x2d')]['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x2110d3['id'],'guild':_0x2435f1[a71_0x5ea8('0x2d')]['id'],'$unset':{'price':0x1}}),await _0x2435f1[a71_0x5ea8('0x1e')][a71_0x5ea8('0x1b')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a71_0x5ea8('0x55')],'description':this['client']['locale'][a71_0x5ea8('0x34')](_0x2435f1[a71_0x5ea8('0x2d')][a71_0x5ea8('0x41')][a71_0x5ea8('0x15')],a71_0x5ea8('0x42'),'roleStoreRemove',_0x2435f1['author'][a71_0x5ea8('0x49')],_0x2110d3[a71_0x5ea8('0x33')])}})[a71_0x5ea8('0x32')](()=>{});}}const _0x31d9d3=await Role_1[a71_0x5ea8('0x0')][a71_0x5ea8('0x13')]({'guild':_0x2435f1[a71_0x5ea8('0x2d')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x31d9d3[a71_0x5ea8('0x3a')])throw new Error('NO_ROLES_ON_SALE');return await _0x2435f1[a71_0x5ea8('0x1e')]['send']({'embed':{'color':tesseract_1[a71_0x5ea8('0x52')]['COLORS'][a71_0x5ea8('0x53')],'title':a71_0x5ea8('0x5'),'fields':_0x31d9d3[a71_0x5ea8('0x39')](_0x2c868a=>({'name':(_0x2435f1['guild'][a71_0x5ea8('0x7')]['cache'][a71_0x5ea8('0x46')](_0x2c868a[a71_0x5ea8('0x30')])?_0x2435f1[a71_0x5ea8('0x2d')][a71_0x5ea8('0x7')][a71_0x5ea8('0x2f')][a71_0x5ea8('0x14')](_0x2c868a[a71_0x5ea8('0x30')])[a71_0x5ea8('0x33')]+'\x20/\x20':'')+_0x2c868a[a71_0x5ea8('0x30')],'value':_0x2c868a[a71_0x5ea8('0x8')]+a71_0x5ea8('0x2a')}))}})[a71_0x5ea8('0x32')](()=>{});};}};