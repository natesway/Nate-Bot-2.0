const a200_0x5ade=['^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Logger','canManage','abs','@bastion/tesseract','send','default','debit','MIN_SAFE_INTEGER','kickThreshold','GuildMember','save','catch','info','name','length','memberInfractions','create','language','highest','constructor','roles','ban','music','test','user','credit','infractions','getDocument','balance','ORANGE','COLORS','Kick','document','error','isOwner','findOne','roleId','Ban','push','has','guild','comparePositionTo','addInfraction','client','\x20infractions.','../utils/numbers','kick','kickable','locale'];(function(_0x5dd13a,_0x5aded3){const _0x492ac4=function(_0x3d6cee){while(--_0x3d6cee){_0x5dd13a['push'](_0x5dd13a['shift']());}},_0x441f12=function(){const _0x1c482f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2e9e02,_0x40f815,_0x48dfb0,_0xd357fe){_0xd357fe=_0xd357fe||{};let _0x52980d=_0x40f815+'='+_0x48dfb0,_0x4b0458=0x0;for(let _0x4878f0=0x0,_0x318af6=_0x2e9e02['length'];_0x4878f0<_0x318af6;_0x4878f0++){const _0x2b65dd=_0x2e9e02[_0x4878f0];_0x52980d+=';\x20'+_0x2b65dd;const _0x29e8d5=_0x2e9e02[_0x2b65dd];_0x2e9e02['push'](_0x29e8d5),_0x318af6=_0x2e9e02['length'],_0x29e8d5!==!![]&&(_0x52980d+='='+_0x29e8d5);}_0xd357fe['cookie']=_0x52980d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x25d710,_0x5ca6ad){_0x25d710=_0x25d710||function(_0xda079b){return _0xda079b;};const _0x54db4a=_0x25d710(new RegExp('(?:^|;\x20)'+_0x5ca6ad['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x53e190=function(_0x4fa3b2,_0x24c9f5){_0x4fa3b2(++_0x24c9f5);};return _0x53e190(_0x492ac4,_0x5aded3),_0x54db4a?decodeURIComponent(_0x54db4a[0x1]):undefined;}},_0x46a1e1=function(){const _0x3c9164=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3c9164['test'](_0x1c482f['removeCookie']['toString']());};_0x1c482f['updateCookie']=_0x46a1e1;let _0xed6cfb='';const _0x381e96=_0x1c482f['updateCookie']();if(!_0x381e96)_0x1c482f['setCookie'](['*'],'counter',0x1);else _0x381e96?_0xed6cfb=_0x1c482f['getCookie'](null,'counter'):_0x1c482f['removeCookie']();};_0x441f12();}(a200_0x5ade,0x1ee));const a200_0x492a=function(_0x5dd13a,_0x5aded3){_0x5dd13a=_0x5dd13a-0x0;let _0x492ac4=a200_0x5ade[_0x5dd13a];return _0x492ac4;};const a200_0x48dfb0=function(){let _0x14f545=!![];return function(_0x14f58c,_0x36fab0){const _0x570249=_0x14f545?function(){if(_0x36fab0){const _0x365b7c=_0x36fab0['apply'](_0x14f58c,arguments);return _0x36fab0=null,_0x365b7c;}}:function(){};return _0x14f545=![],_0x570249;};}(),a200_0x40f815=a200_0x48dfb0(this,function(){const _0x29302f=function(){const _0x29486e=_0x29302f['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a200_0x492a('0x1a')](a200_0x492a('0x6'));return!_0x29486e[a200_0x492a('0x1e')](a200_0x40f815);};return _0x29302f();});a200_0x40f815();'use strict';const tesseract_1=require(a200_0x492a('0xa')),discord_js_1=require('discord.js'),Member_1=require('../models/Member'),Transaction_1=require('../models/Transaction'),numbers=require(a200_0x492a('0x2'));module['exports']=class BastionGuildMember extends discord_js_1[a200_0x492a('0x10')]{constructor(_0x13bab2,_0x243962,_0x27f52e){super(_0x13bab2,_0x243962,_0x27f52e);}[a200_0x492a('0x8')](_0x4e1457){if(this['id']===this[a200_0x492a('0x2f')]['ownerID'])return!![];if(_0x4e1457['id']===this[a200_0x492a('0x2f')]['ownerID'])return![];if(this['id']===_0x4e1457['id'])return![];return this['roles'][a200_0x492a('0x19')][a200_0x492a('0x30')](_0x4e1457['roles'][a200_0x492a('0x19')])>0x0;}async[a200_0x492a('0x22')](){return await Member_1[a200_0x492a('0xc')][a200_0x492a('0x2a')]({'user':this['id'],'guild':this[a200_0x492a('0x2f')]['id']});}['isMusicMaster'](){if(this[a200_0x492a('0x1f')][a200_0x492a('0x29')]())return!![];return this[a200_0x492a('0x2f')][a200_0x492a('0x27')][a200_0x492a('0x1d')]&&this[a200_0x492a('0x2f')][a200_0x492a('0x27')][a200_0x492a('0x1d')]['roleId']&&this[a200_0x492a('0x1b')]['cache'][a200_0x492a('0x2e')](this[a200_0x492a('0x2f')][a200_0x492a('0x27')][a200_0x492a('0x1d')][a200_0x492a('0x2b')]);}async[a200_0x492a('0x31')](_0x5c13e1){let _0x2ab370=await this['getDocument']();_0x2ab370?_0x2ab370[a200_0x492a('0x21')]?_0x2ab370['infractions'][a200_0x492a('0x2d')](_0x5c13e1):_0x2ab370[a200_0x492a('0x21')]=[_0x5c13e1]:_0x2ab370=await Member_1[a200_0x492a('0xc')][a200_0x492a('0x17')]({'user':this['id'],'guild':this[a200_0x492a('0x2f')]['id'],'infractions':[_0x5c13e1]});const _0x564745=this[a200_0x492a('0x2f')][a200_0x492a('0x27')]?this[a200_0x492a('0x2f')][a200_0x492a('0x27')]:await this[a200_0x492a('0x2f')][a200_0x492a('0x22')]();if(_0x564745[a200_0x492a('0x21')]){const _0x42c6b2=_0x2ab370[a200_0x492a('0x21')][a200_0x492a('0x15')];let _0x25205a;this[a200_0x492a('0x4')]&&_0x2ab370[a200_0x492a('0x21')]['length']===_0x564745[a200_0x492a('0x21')][a200_0x492a('0xf')]&&(_0x25205a=a200_0x492a('0x26'),await this[a200_0x492a('0x3')](_0x2ab370[a200_0x492a('0x21')][a200_0x492a('0x15')]+'\x20infractions.')),this['bannable']&&_0x2ab370[a200_0x492a('0x21')]['length']===_0x564745[a200_0x492a('0x21')]['banThreshold']&&(_0x25205a=a200_0x492a('0x2c'),await this[a200_0x492a('0x1c')]({'reason':_0x2ab370['infractions']['length']+a200_0x492a('0x1')}),_0x2ab370[a200_0x492a('0x21')]=undefined,delete _0x2ab370['infractions']),_0x25205a&&await this[a200_0x492a('0xb')]({'embed':{'color':tesseract_1['Constants'][a200_0x492a('0x25')][a200_0x492a('0x24')],'description':this[a200_0x492a('0x0')][a200_0x492a('0x5')]['getString'](_0x564745[a200_0x492a('0x18')],a200_0x492a('0x13'),a200_0x492a('0x16')+_0x25205a,this[a200_0x492a('0x2f')][a200_0x492a('0x14')],_0x42c6b2)}})[a200_0x492a('0x12')](()=>{});}return _0x2ab370[a200_0x492a('0x11')]();}async['clearInfractions'](){const _0x54da33=this[a200_0x492a('0x27')]?this['document']:await this[a200_0x492a('0x22')]();return _0x54da33[a200_0x492a('0x21')]=undefined,delete _0x54da33['infractions'],_0x54da33['save']();}async[a200_0x492a('0x20')](_0x365808,_0x52f860,_0x532d86){_0x365808=Math[a200_0x492a('0x9')](_0x365808);const _0x230242=_0x532d86||await this[a200_0x492a('0x22')]();return _0x365808&&(_0x230242['balance']=numbers['clamp'](_0x230242['balance']+_0x365808,Number['MAX_SAFE_INTEGER']),!_0x532d86&&await Transaction_1[a200_0x492a('0xc')][a200_0x492a('0x17')]({'guild':this[a200_0x492a('0x2f')]['id'],'sender':this['client'][a200_0x492a('0x1f')]['id'],'receiver':_0x230242[a200_0x492a('0x1f')],'amount':_0x365808,'time':new Date(),'note':_0x52f860})[a200_0x492a('0x12')](tesseract_1[a200_0x492a('0x7')][a200_0x492a('0x28')])),_0x532d86?_0x230242:_0x230242[a200_0x492a('0x11')]();}async[a200_0x492a('0xd')](_0x37d781,_0x304f55,_0x3e0a75){_0x37d781=Math[a200_0x492a('0x9')](_0x37d781);const _0x42b5a8=_0x3e0a75||await this['getDocument']();return _0x37d781&&(_0x42b5a8[a200_0x492a('0x23')]=numbers['clamp'](_0x42b5a8[a200_0x492a('0x23')]-_0x37d781,Number[a200_0x492a('0xe')],Number['MAX_SAFE_INTEGER']),!_0x3e0a75&&await Transaction_1['default'][a200_0x492a('0x17')]({'guild':this[a200_0x492a('0x2f')]['id'],'sender':_0x42b5a8[a200_0x492a('0x1f')],'receiver':this['client'][a200_0x492a('0x1f')]['id'],'amount':_0x37d781,'time':new Date(),'note':_0x304f55})[a200_0x492a('0x12')](tesseract_1[a200_0x492a('0x7')]['error'])),_0x3e0a75?_0x42b5a8:_0x42b5a8[a200_0x492a('0x11')]();}};