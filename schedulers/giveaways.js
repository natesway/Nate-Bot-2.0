const a195_0x594a=['Scheduler','find','../models/Giveaway','default','Logger','@bastion/tesseract','size','title','cache','catch','Constants','length','values','reactions','push','embeds','filter','_id','messages','edit','The\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','exports','Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','join','RED','channel','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','client','GIVEAWAY\x20ENDED','users','winners','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','fetch','channels','COLORS','guild','floor','get','giveaways','exec'];(function(_0x2060b6,_0x594a25){const _0x33049b=function(_0x530416){while(--_0x530416){_0x2060b6['push'](_0x2060b6['shift']());}},_0x27b4e8=function(){const _0x36c7dc={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5557db,_0x2e1fa8,_0x2b4457,_0x440b3f){_0x440b3f=_0x440b3f||{};let _0x5d1be8=_0x2e1fa8+'='+_0x2b4457,_0x4beeb4=0x0;for(let _0x3251bb=0x0,_0x4b7bf8=_0x5557db['length'];_0x3251bb<_0x4b7bf8;_0x3251bb++){const _0x1307ad=_0x5557db[_0x3251bb];_0x5d1be8+=';\x20'+_0x1307ad;const _0x391c14=_0x5557db[_0x1307ad];_0x5557db['push'](_0x391c14),_0x4b7bf8=_0x5557db['length'],_0x391c14!==!![]&&(_0x5d1be8+='='+_0x391c14);}_0x440b3f['cookie']=_0x5d1be8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3afce6,_0x1b108f){_0x3afce6=_0x3afce6||function(_0x406134){return _0x406134;};const _0x10c89e=_0x3afce6(new RegExp('(?:^|;\x20)'+_0x1b108f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x314698=function(_0x489dca,_0x121e27){_0x489dca(++_0x121e27);};return _0x314698(_0x33049b,_0x594a25),_0x10c89e?decodeURIComponent(_0x10c89e[0x1]):undefined;}},_0xcb3cb6=function(){const _0x30af7c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x30af7c['test'](_0x36c7dc['removeCookie']['toString']());};_0x36c7dc['updateCookie']=_0xcb3cb6;let _0x2108e7='';const _0x1f775c=_0x36c7dc['updateCookie']();if(!_0x1f775c)_0x36c7dc['setCookie'](['*'],'counter',0x1);else _0x1f775c?_0x2108e7=_0x36c7dc['getCookie'](null,'counter'):_0x36c7dc['removeCookie']();};_0x27b4e8();}(a195_0x594a,0xec));const a195_0x3304=function(_0x2060b6,_0x594a25){_0x2060b6=_0x2060b6-0x0;let _0x33049b=a195_0x594a[_0x2060b6];return _0x33049b;};const a195_0x2b4457=function(){let _0x28572d=!![];return function(_0x4a5d41,_0x588f81){const _0x27c0f1=_0x28572d?function(){if(_0x588f81){const _0x530a84=_0x588f81['apply'](_0x4a5d41,arguments);return _0x588f81=null,_0x530a84;}}:function(){};return _0x28572d=![],_0x27c0f1;};}(),a195_0x2e1fa8=a195_0x2b4457(this,function(){const _0x5c0198=function(){const _0x9c214a=_0x5c0198['constructor'](a195_0x3304('0x25'))()['constructor'](a195_0x3304('0x1'));return!_0x9c214a[a195_0x3304('0x24')](a195_0x2e1fa8);};return _0x5c0198();});a195_0x2e1fa8();'use strict';const tesseract_1=require(a195_0x3304('0xf')),Giveaway_1=require(a195_0x3304('0xc'));module[a195_0x3304('0x1f')]=class GiveawayScheduler extends tesseract_1[a195_0x3304('0xa')]{constructor(){super(a195_0x3304('0x8'),{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'}),this[a195_0x3304('0x9')]=async()=>{try{if(!this[a195_0x3304('0x26')]['readyTimestamp'])return;if(!this[a195_0x3304('0x26')]['guilds'][a195_0x3304('0x12')][a195_0x3304('0x10')])return;const _0xe54e3a=await Giveaway_1[a195_0x3304('0xd')][a195_0x3304('0xb')]({'$or':this[a195_0x3304('0x26')]['guilds']['cache']['map'](_0x30d6b1=>({'guild':_0x30d6b1['id']})),'ends':{'$lte':new Date()}}),_0x3462f0=[];for(const _0x2b3f85 of _0xe54e3a){const _0x50745c=this[a195_0x3304('0x26')]['guilds'][a195_0x3304('0x12')][a195_0x3304('0x7')](_0x2b3f85[a195_0x3304('0x5')]);if(_0x50745c['channels'][a195_0x3304('0x12')]['has'](_0x2b3f85[a195_0x3304('0x23')])){const _0x59f9a2=_0x50745c[a195_0x3304('0x3')]['cache'][a195_0x3304('0x7')](_0x2b3f85[a195_0x3304('0x23')]),_0x20645f=await _0x59f9a2[a195_0x3304('0x1c')][a195_0x3304('0x2')](_0x2b3f85[a195_0x3304('0x1b')])[a195_0x3304('0x13')](()=>{});if(!_0x20645f)continue;let _0x2a7277=[];for(const _0x5665aa of['ðŸŽŠ','ðŸŽ‰']){_0x20645f['reactions'][a195_0x3304('0x12')]['has'](_0x5665aa)&&(await _0x20645f[a195_0x3304('0x17')][a195_0x3304('0x12')]['get'](_0x5665aa)[a195_0x3304('0x28')]['fetch']()[a195_0x3304('0x13')](()=>{}),_0x2a7277['push'](..._0x20645f[a195_0x3304('0x17')]['cache'][a195_0x3304('0x7')](_0x5665aa)[a195_0x3304('0x28')]['cache'][a195_0x3304('0x1a')](_0x2cd16f=>!_0x2cd16f['bot'])[a195_0x3304('0x16')]()));}const _0x306e4f=[];for(let _0x5639ce=0x0;_0x5639ce<(_0x2b3f85[a195_0x3304('0x0')]||0x1);_0x5639ce++){if(!_0x2a7277['length'])break;const _0x18e20d=_0x2a7277[Math[a195_0x3304('0x6')](Math['random']()*_0x2a7277['length'])];_0x306e4f[a195_0x3304('0x18')](_0x18e20d),_0x2a7277=_0x2a7277['filter'](_0x315ebb=>_0x315ebb['id']!==_0x18e20d['id']);}_0x306e4f[a195_0x3304('0x15')]?await _0x20645f[a195_0x3304('0x1d')]({'embed':{'color':tesseract_1[a195_0x3304('0x14')][a195_0x3304('0x4')]['SOMEWHAT_DARK'],'author':{'name':'GIVEAWAY\x20ENDED'},'title':_0x20645f[a195_0x3304('0x19')][0x0][a195_0x3304('0x11')],'description':a195_0x3304('0x1e'),'fields':[{'name':'Congratulations','value':_0x306e4f[a195_0x3304('0x21')](',\x20')}],'footer':{'text':_0x20645f['id']},'timestamp':new Date()}})['then'](()=>{_0x3462f0[a195_0x3304('0x18')](_0x20645f['id']);})[a195_0x3304('0x13')](()=>{}):await _0x20645f[a195_0x3304('0x1d')]({'embed':{'color':tesseract_1[a195_0x3304('0x14')]['COLORS'][a195_0x3304('0x22')],'author':{'name':a195_0x3304('0x27')},'title':_0x20645f[a195_0x3304('0x19')][0x0][a195_0x3304('0x11')],'description':a195_0x3304('0x20'),'footer':{'text':_0x20645f['id']},'timestamp':new Date()}})['then'](()=>{_0x3462f0[a195_0x3304('0x18')](_0x20645f['id']);})[a195_0x3304('0x13')](()=>{});}}_0x3462f0[a195_0x3304('0x15')]&&await Giveaway_1['default']['deleteMany']({'$or':_0x3462f0['map'](_0x137fca=>({'_id':_0x137fca}))})['catch'](()=>{});}catch(_0x1182ad){tesseract_1[a195_0x3304('0xe')]['error'](_0x1182ad);}};}};