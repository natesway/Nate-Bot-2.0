const a196_0x2cfd=['language','title','push','get','{width}','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','includes','TWITCH','twitch','toUpperCase','thumbnail_url','cache','user_name','https://api.twitch.tv/helix/streams/?user_login=','join','has','json','catch','set','guilds','liveStreams','channels','error','channelId','../utils/constants','send','1280','viewer_count','replace','0\x20*/5\x20*\x20*\x20*\x20*','client','Logger','handleTwitchStreamers','size','streamers','data','Language','readyTimestamp','twitchSubscriptions','started_at','then','constructor','default','{height}','length','apply','credentials','Viewers','_id','accessToken'];(function(_0x57bce1,_0x2cfd4b){const _0x34d375=function(_0x30786f){while(--_0x30786f){_0x57bce1['push'](_0x57bce1['shift']());}},_0x5b541c=function(){const _0x44eab1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x148538,_0x214cfa,_0x3a320b,_0x4a78f4){_0x4a78f4=_0x4a78f4||{};let _0x2baef4=_0x214cfa+'='+_0x3a320b,_0xec94e4=0x0;for(let _0x51c8ee=0x0,_0x414b7e=_0x148538['length'];_0x51c8ee<_0x414b7e;_0x51c8ee++){const _0x20f497=_0x148538[_0x51c8ee];_0x2baef4+=';\x20'+_0x20f497;const _0x52bc52=_0x148538[_0x20f497];_0x148538['push'](_0x52bc52),_0x414b7e=_0x148538['length'],_0x52bc52!==!![]&&(_0x2baef4+='='+_0x52bc52);}_0x4a78f4['cookie']=_0x2baef4;},'removeCookie':function(){return'dev';},'getCookie':function(_0x48a79e,_0x47b7d0){_0x48a79e=_0x48a79e||function(_0x5dfab7){return _0x5dfab7;};const _0x4f3c78=_0x48a79e(new RegExp('(?:^|;\x20)'+_0x47b7d0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4b9e5a=function(_0x4ab043,_0x37c005){_0x4ab043(++_0x37c005);};return _0x4b9e5a(_0x34d375,_0x2cfd4b),_0x4f3c78?decodeURIComponent(_0x4f3c78[0x1]):undefined;}},_0x1bc4c2=function(){const _0x30801c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x30801c['test'](_0x44eab1['removeCookie']['toString']());};_0x44eab1['updateCookie']=_0x1bc4c2;let _0x57fdb8='';const _0x269833=_0x44eab1['updateCookie']();if(!_0x269833)_0x44eab1['setCookie'](['*'],'counter',0x1);else _0x269833?_0x57fdb8=_0x44eab1['getCookie'](null,'counter'):_0x44eab1['removeCookie']();};_0x5b541c();}(a196_0x2cfd,0x1d4));const a196_0x34d3=function(_0x57bce1,_0x2cfd4b){_0x57bce1=_0x57bce1-0x0;let _0x34d375=a196_0x2cfd[_0x57bce1];return _0x34d375;};const a196_0x3a320b=function(){let _0x5ff334=!![];return function(_0x2c4322,_0xdd971b){const _0x176624=_0x5ff334?function(){if(_0xdd971b){const _0x27501b=_0xdd971b[a196_0x34d3('0x1b')](_0x2c4322,arguments);return _0xdd971b=null,_0x27501b;}}:function(){};return _0x5ff334=![],_0x176624;};}(),a196_0x214cfa=a196_0x3a320b(this,function(){const _0x5265e0=function(){const _0x1a60e8=_0x5265e0[a196_0x34d3('0x17')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a196_0x34d3('0x17')](a196_0x34d3('0x25'));return!_0x1a60e8['test'](a196_0x214cfa);};return _0x5265e0();});a196_0x214cfa();'use strict';const tesseract_1=require('@bastion/tesseract'),node_fetch_1=require('node-fetch'),Guild_1=require('../models/Guild'),constants=require(a196_0x34d3('0x6'));module['exports']=class LiveStreams extends tesseract_1['Scheduler']{constructor(){super(a196_0x34d3('0x2'),{'cronTime':a196_0x34d3('0xb')}),this[a196_0x34d3('0xe')]=async(_0x361ab6,_0xee4a4e)=>{if(!this[a196_0x34d3('0xc')][a196_0x34d3('0x13')])return;if(!this['twitchSubscriptions'][a196_0x34d3('0x2f')](_0x361ab6))this[a196_0x34d3('0x14')][a196_0x34d3('0x0')](_0x361ab6,[]);const _0x1ccd9f=this[a196_0x34d3('0x14')][a196_0x34d3('0x23')](_0x361ab6),_0x495a3b=await node_fetch_1[a196_0x34d3('0x18')](a196_0x34d3('0x2d')+_0xee4a4e['users'][a196_0x34d3('0x2e')]('&user_login='),{'headers':{'Accept':'application/json','Authorization':'Bearer\x20'+this[a196_0x34d3('0xc')][a196_0x34d3('0x1c')]['twitch'][a196_0x34d3('0x1f')],'Client-ID':this[a196_0x34d3('0xc')]['credentials'][a196_0x34d3('0x28')]['clientId']}}),_0x1f8e9d=(await _0x495a3b[a196_0x34d3('0x30')]())[a196_0x34d3('0x11')];for(const _0x4d193a of _0x1f8e9d){if(_0x1ccd9f[a196_0x34d3('0x26')](_0x4d193a['id']))continue;this[a196_0x34d3('0xc')][a196_0x34d3('0x3')][a196_0x34d3('0x2b')]['has'](_0xee4a4e[a196_0x34d3('0x5')])&&await this[a196_0x34d3('0xc')]['channels'][a196_0x34d3('0x2b')]['get'](_0xee4a4e[a196_0x34d3('0x5')])[a196_0x34d3('0x7')]({'embed':{'color':constants['COLORS'][a196_0x34d3('0x27')],'author':{'name':_0x4d193a[a196_0x34d3('0x2c')],'url':'https://twitch.tv/'+_0x4d193a[a196_0x34d3('0x2c')]},'description':_0x4d193a[a196_0x34d3('0x21')],'fields':[{'name':a196_0x34d3('0x1d'),'value':_0x4d193a[a196_0x34d3('0x9')]['toString'](),'inline':!![]},{'name':a196_0x34d3('0x12'),'value':_0x4d193a[a196_0x34d3('0x20')][a196_0x34d3('0x29')](),'inline':!![]}],'image':{'url':_0x4d193a[a196_0x34d3('0x2a')][a196_0x34d3('0xa')](a196_0x34d3('0x24'),a196_0x34d3('0x8'))['replace'](a196_0x34d3('0x19'),'720')},'footer':{'text':'ðŸ”´\x20LIVE'},'timestamp':_0x4d193a[a196_0x34d3('0x15')]}})[a196_0x34d3('0x16')](()=>{_0x1ccd9f[a196_0x34d3('0x22')](_0x4d193a['id']);})['catch'](()=>{});}this['twitchSubscriptions'][a196_0x34d3('0x0')](_0x361ab6,_0x1ccd9f);},this['exec']=async()=>{try{if(!this[a196_0x34d3('0xc')][a196_0x34d3('0x1')][a196_0x34d3('0x2b')][a196_0x34d3('0xf')])return;const _0x3c4de3=await Guild_1[a196_0x34d3('0x18')]['find']({'$or':this['client']['guilds']['cache']['map'](_0x15095a=>({'_id':_0x15095a['id']})),'streamers':{'$exists':!![]}});for(const _0x1af562 of _0x3c4de3){_0x1af562[a196_0x34d3('0x10')][a196_0x34d3('0x28')]&&_0x1af562['streamers'][a196_0x34d3('0x28')][a196_0x34d3('0x5')]&&_0x1af562[a196_0x34d3('0x10')][a196_0x34d3('0x28')]['users'][a196_0x34d3('0x1a')]&&this[a196_0x34d3('0xe')](_0x1af562[a196_0x34d3('0x1e')],_0x1af562[a196_0x34d3('0x10')][a196_0x34d3('0x28')])[a196_0x34d3('0x31')](_0x3007d9=>tesseract_1[a196_0x34d3('0xd')][a196_0x34d3('0x4')](_0x3007d9));}}catch(_0x401b31){tesseract_1[a196_0x34d3('0xd')][a196_0x34d3('0x4')](_0x401b31);}},this[a196_0x34d3('0x14')]=new Map();}};