const a138_0x4a7c=['find','replaceMessageVariables','random','constructor','owner','success','push','multiplier','/chat/instant?message=','parseEmoji','apply','LEVELED\x20UP!','fetchApplication','cache','../models/Role','handleVotingChannels','makeRequest','findById','recentUsers','level','add','has','client','react','../models/TextChannel','computeLevel','responseReaction','get','levelUp','roles','replace','relayDirectMessages','responseMessage','handleDirectMessageRelay','floor','findOne','Logger','setTimeout','_id','set','exports','../models/Config','stringify','content','handleInstantResponses','MAX_EXPERIENCE','reaction','displayAvatarURL','../models/Trigger','Team','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20Trigger','user','info','indexOf','Level-up\x20Reward','remove','author','response','discord.js','locale','channel','../utils/gamification','getConstant','member','map','json','ModuleManagerEvent','Constants','../utils/variables','reply','document','../utils/emojis','language','catch','status','return\x20/\x22\x20+\x20this\x20+\x20\x22/','handleGamification','exec','gamification','bastion.name','error','messages','includes','guild','then','@bastion/tesseract','filter','send','handleTriggers','IRIS','humanMessage','test','tag','length','default','handleLevelRoles'];(function(_0x279879,_0x4a7c19){const _0x5af6c8=function(_0x130097){while(--_0x130097){_0x279879['push'](_0x279879['shift']());}},_0x52314a=function(){const _0x55a88a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x551755,_0x4b62f8,_0xde856a,_0xa47a39){_0xa47a39=_0xa47a39||{};let _0x1de3f3=_0x4b62f8+'='+_0xde856a,_0x5ec345=0x0;for(let _0x228a51=0x0,_0x37b973=_0x551755['length'];_0x228a51<_0x37b973;_0x228a51++){const _0x4127fa=_0x551755[_0x228a51];_0x1de3f3+=';\x20'+_0x4127fa;const _0x4fc17b=_0x551755[_0x4127fa];_0x551755['push'](_0x4fc17b),_0x37b973=_0x551755['length'],_0x4fc17b!==!![]&&(_0x1de3f3+='='+_0x4fc17b);}_0xa47a39['cookie']=_0x1de3f3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x22fec5,_0x166c78){_0x22fec5=_0x22fec5||function(_0x58fa2b){return _0x58fa2b;};const _0x3de96a=_0x22fec5(new RegExp('(?:^|;\x20)'+_0x166c78['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1cdceb=function(_0x217589,_0x313cb7){_0x217589(++_0x313cb7);};return _0x1cdceb(_0x5af6c8,_0x4a7c19),_0x3de96a?decodeURIComponent(_0x3de96a[0x1]):undefined;}},_0x5ef5cd=function(){const _0x10e63f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x10e63f['test'](_0x55a88a['removeCookie']['toString']());};_0x55a88a['updateCookie']=_0x5ef5cd;let _0x24eca6='';const _0x28ab39=_0x55a88a['updateCookie']();if(!_0x28ab39)_0x55a88a['setCookie'](['*'],'counter',0x1);else _0x28ab39?_0x24eca6=_0x55a88a['getCookie'](null,'counter'):_0x55a88a['removeCookie']();};_0x52314a();}(a138_0x4a7c,0x10a));const a138_0x5af6=function(_0x279879,_0x4a7c19){_0x279879=_0x279879-0x0;let _0x5af6c8=a138_0x4a7c[_0x279879];return _0x5af6c8;};const a138_0xde856a=function(){let _0x55867f=!![];return function(_0x573bfc,_0x2b0aae){const _0x185c19=_0x55867f?function(){if(_0x2b0aae){const _0x494b1e=_0x2b0aae[a138_0x5af6('0x23')](_0x573bfc,arguments);return _0x2b0aae=null,_0x494b1e;}}:function(){};return _0x55867f=![],_0x185c19;};}(),a138_0x4b62f8=a138_0xde856a(this,function(){const _0x2eac0e=function(){const _0x218ca4=_0x2eac0e['constructor'](a138_0x5af6('0x4'))()[a138_0x5af6('0x1c')](a138_0x5af6('0x4b'));return!_0x218ca4['test'](a138_0x4b62f8);};return _0x2eac0e();});a138_0x4b62f8();'use strict';const tesseract_1=require(a138_0x5af6('0xe')),discord_js_1=require(a138_0x5af6('0x54')),emojis=require(a138_0x5af6('0x0')),gamification=require(a138_0x5af6('0x57')),omnic=require('../utils/omnic'),variables=require(a138_0x5af6('0x5e')),Config_1=require(a138_0x5af6('0x42')),Role_1=require(a138_0x5af6('0x27')),TextChannel_1=require(a138_0x5af6('0x31')),Trigger_1=require(a138_0x5af6('0x49'));module[a138_0x5af6('0x41')]=class HumanMessageEvent extends tesseract_1[a138_0x5af6('0x5c')]{constructor(){super(a138_0x5af6('0x13')),this['handleLevelRoles']=async(_0x322061,_0x3f3217)=>{const _0x132ad1=await Role_1['default']['find']({'guild':_0x322061[a138_0x5af6('0xc')]['id'],'level':{'$exists':!![]}}),_0x473301=_0x132ad1[a138_0x5af6('0xf')](_0x3d8fba=>_0x3d8fba['level']!==_0x3f3217&&_0x322061['guild'][a138_0x5af6('0x36')][a138_0x5af6('0x26')][a138_0x5af6('0x2e')](_0x3d8fba['_id'])),_0x4509a7=_0x132ad1['filter'](_0xc6f76=>_0xc6f76[a138_0x5af6('0x2c')]===_0x3f3217&&_0x322061[a138_0x5af6('0xc')][a138_0x5af6('0x36')][a138_0x5af6('0x26')]['has'](_0xc6f76[a138_0x5af6('0x3f')]));_0x4509a7[a138_0x5af6('0x16')]&&(await _0x322061[a138_0x5af6('0x59')]['roles'][a138_0x5af6('0x2d')](_0x4509a7[a138_0x5af6('0x5a')](_0x4365e0=>_0x4365e0[a138_0x5af6('0x3f')])),await _0x322061[a138_0x5af6('0x59')][a138_0x5af6('0x36')][a138_0x5af6('0x51')](_0x473301[a138_0x5af6('0x5a')](_0x1e574d=>_0x1e574d[a138_0x5af6('0x3f')])));},this[a138_0x5af6('0x5')]=async _0x349dd8=>{const _0x4f5e32=this[a138_0x5af6('0x2b')][a138_0x5af6('0x34')](_0x349dd8[a138_0x5af6('0xc')]['id'])||[];if(_0x4f5e32[a138_0x5af6('0xb')](_0x349dd8[a138_0x5af6('0x52')]['id']))return;const _0x265e8=_0x349dd8[a138_0x5af6('0x2f')],_0x9c8220=_0x349dd8[a138_0x5af6('0xc')],_0x1da0b3=_0x349dd8[a138_0x5af6('0x59')];if(!_0x9c8220[a138_0x5af6('0x60')][a138_0x5af6('0x7')]||!_0x9c8220['document'][a138_0x5af6('0x7')]['enabled'])return;if(_0x1da0b3[a138_0x5af6('0x60')][a138_0x5af6('0x2c')]>=gamification['MAX_LEVEL']||_0x1da0b3[a138_0x5af6('0x60')]['experience']>=gamification[a138_0x5af6('0x46')](_0x9c8220[a138_0x5af6('0x60')][a138_0x5af6('0x7')][a138_0x5af6('0x20')]))return;_0x1da0b3[a138_0x5af6('0x60')]['experience']+=0x1;const _0x2d0cef=gamification[a138_0x5af6('0x32')](_0x1da0b3[a138_0x5af6('0x60')]['experience'],_0x9c8220[a138_0x5af6('0x60')][a138_0x5af6('0x7')][a138_0x5af6('0x20')]);_0x2d0cef>_0x1da0b3[a138_0x5af6('0x60')][a138_0x5af6('0x2c')]&&(await _0x1da0b3['credit'](_0x2d0cef*gamification['DEFAUL_CURRENCY_REWARD_MULTIPLIER'],a138_0x5af6('0x50'),_0x1da0b3[a138_0x5af6('0x60')]),_0x9c8220['document'][a138_0x5af6('0x7')][a138_0x5af6('0xa')]&&_0x349dd8[a138_0x5af6('0x56')][a138_0x5af6('0x10')]({'embed':{'color':tesseract_1[a138_0x5af6('0x5d')]['COLORS'][a138_0x5af6('0x12')],'fields':[{'name':a138_0x5af6('0x24'),'value':_0x265e8[a138_0x5af6('0x55')]['getString'](_0x9c8220['document'][a138_0x5af6('0x1')],a138_0x5af6('0x4e'),a138_0x5af6('0x35'),_0x349dd8['author']['tag'],_0x1da0b3[a138_0x5af6('0x60')][a138_0x5af6('0x2c')])}]}})[a138_0x5af6('0x2')](()=>{}),this[a138_0x5af6('0x18')](_0x349dd8,_0x1da0b3[a138_0x5af6('0x60')][a138_0x5af6('0x2c')])[a138_0x5af6('0x2')](tesseract_1[a138_0x5af6('0x3d')]['error'])),_0x1da0b3[a138_0x5af6('0x60')][a138_0x5af6('0x2c')]=_0x2d0cef,await _0x1da0b3[a138_0x5af6('0x60')]['save'](),_0x4f5e32[a138_0x5af6('0x1f')](_0x349dd8[a138_0x5af6('0x52')]['id']),this[a138_0x5af6('0x2b')][a138_0x5af6('0x40')](_0x349dd8['guild']['id'],_0x4f5e32),_0x349dd8[a138_0x5af6('0x2f')][a138_0x5af6('0x3e')](()=>{const _0x55c932=this[a138_0x5af6('0x2b')][a138_0x5af6('0x34')](_0x349dd8[a138_0x5af6('0xc')]['id']);_0x55c932['splice'](_0x55c932[a138_0x5af6('0x4f')](_0x349dd8[a138_0x5af6('0x52')]['id']),0x1),this['recentUsers']['set'](_0x349dd8[a138_0x5af6('0xc')]['id'],_0x55c932);},0x32c8);},this[a138_0x5af6('0x11')]=async _0x492783=>{if(!_0x492783[a138_0x5af6('0x44')])return;const _0x1f5df3=await Trigger_1[a138_0x5af6('0x17')][a138_0x5af6('0x19')]({'guild':_0x492783['guild']['id']}),_0x1f27f0=[],_0x137a28=[];for(const _0x23000a of _0x1f5df3){const _0x444465=new RegExp(_0x23000a['trigger'][a138_0x5af6('0x37')](/\?/g,'.')[a138_0x5af6('0x37')](/\*+/g,'.*'),'ig');if(!_0x444465[a138_0x5af6('0x14')](_0x492783['content']))continue;_0x23000a['responseMessage']&&_0x1f27f0[a138_0x5af6('0x1f')](_0x23000a[a138_0x5af6('0x39')]);if(_0x23000a[a138_0x5af6('0x33')]){const _0x457644=emojis[a138_0x5af6('0x22')](_0x23000a[a138_0x5af6('0x33')]);_0x457644&&_0x137a28[a138_0x5af6('0x1f')](_0x457644[a138_0x5af6('0x47')]);}}_0x1f27f0[a138_0x5af6('0x16')]&&_0x492783[a138_0x5af6('0x56')][a138_0x5af6('0x10')]({'embed':{...JSON['parse'](variables[a138_0x5af6('0x1a')](JSON[a138_0x5af6('0x43')](_0x1f27f0[Math[a138_0x5af6('0x3b')](Math[a138_0x5af6('0x1b')]()*_0x1f27f0['length'])]),_0x492783)),'footer':{'text':_0x492783[a138_0x5af6('0x2f')][a138_0x5af6('0x55')][a138_0x5af6('0x58')](a138_0x5af6('0x8'))+a138_0x5af6('0x4c')}}})['catch'](tesseract_1[a138_0x5af6('0x3d')][a138_0x5af6('0x9')]),_0x137a28['length']&&_0x492783['react'](_0x137a28[Math['floor'](Math[a138_0x5af6('0x1b')]()*_0x137a28['length'])])[a138_0x5af6('0x2')](tesseract_1['Logger'][a138_0x5af6('0x9')]);},this[a138_0x5af6('0x28')]=async _0x26bb4c=>{const _0x206096=await TextChannel_1['default'][a138_0x5af6('0x3c')]({'_id':_0x26bb4c[a138_0x5af6('0x56')]['id'],'voting':!![]});if(!_0x206096)return;_0x26bb4c[a138_0x5af6('0x30')]('👍')[a138_0x5af6('0x2')](()=>{}),_0x26bb4c[a138_0x5af6('0x30')]('👎')[a138_0x5af6('0x2')](()=>{});},this[a138_0x5af6('0x45')]=async _0x4df3f6=>{if(!_0x4df3f6['content'])return;const _0x558c67=await omnic[a138_0x5af6('0x29')](a138_0x5af6('0x21')+encodeURIComponent(_0x4df3f6[a138_0x5af6('0x44')]))[a138_0x5af6('0xd')](_0x4d674b=>_0x4d674b[a138_0x5af6('0x5b')]());if(_0x558c67[a138_0x5af6('0x3')]!==a138_0x5af6('0x1e'))return;const _0x56a194=_0x558c67[a138_0x5af6('0x53')]['reply']instanceof Array?_0x558c67[a138_0x5af6('0x53')][a138_0x5af6('0x5f')]:[_0x558c67[a138_0x5af6('0x53')]['reply']];for(const _0x4563ec of _0x56a194){await _0x4df3f6['channel']['send'](_0x4563ec)[a138_0x5af6('0x2')](()=>{});}},this[a138_0x5af6('0x3a')]=async _0x5a5316=>{const _0x377c24=await Config_1[a138_0x5af6('0x17')][a138_0x5af6('0x2a')](_0x5a5316[a138_0x5af6('0x2f')][a138_0x5af6('0x4d')]['id']);if(_0x377c24[a138_0x5af6('0x38')]&&_0x5a5316['content']){const _0x129b03=await _0x5a5316[a138_0x5af6('0x2f')][a138_0x5af6('0x25')](),_0x323fee=_0x129b03['owner']instanceof discord_js_1[a138_0x5af6('0x4a')]?_0x129b03[a138_0x5af6('0x1d')][a138_0x5af6('0x1d')][a138_0x5af6('0x4d')]:_0x129b03['owner'];if(_0x5a5316[a138_0x5af6('0x52')]['id']===_0x323fee['id'])return;const _0x5d3f53=await _0x323fee['createDM']();await _0x5d3f53[a138_0x5af6('0x10')]({'embed':{'color':tesseract_1[a138_0x5af6('0x5d')]['COLORS'][a138_0x5af6('0x12')],'author':{'name':_0x5a5316[a138_0x5af6('0x52')][a138_0x5af6('0x15')],'iconURL':_0x5a5316[a138_0x5af6('0x52')][a138_0x5af6('0x48')]({'dynamic':!![],'size':0x40})},'description':_0x5a5316[a138_0x5af6('0x44')],'footer':{'text':_0x5a5316[a138_0x5af6('0x52')]['id']}}});}},this[a138_0x5af6('0x6')]=async _0x22799a=>{_0x22799a[a138_0x5af6('0xc')]?(this[a138_0x5af6('0x5')](_0x22799a)[a138_0x5af6('0x2')](()=>{}),this[a138_0x5af6('0x11')](_0x22799a)[a138_0x5af6('0x2')](()=>{}),this['handleVotingChannels'](_0x22799a)[a138_0x5af6('0x2')](()=>{})):(this['handleInstantResponses'](_0x22799a)[a138_0x5af6('0x2')](()=>{}),this[a138_0x5af6('0x3a')](_0x22799a)[a138_0x5af6('0x2')](()=>{}));},this['recentUsers']=new Map();}};