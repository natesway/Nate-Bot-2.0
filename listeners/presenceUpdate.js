const a170_0x448c=['../models/Guild','fetch','activities','has','default','type','return\x20/\x22\x20+\x20this\x20+\x20\x22/','cache','apply','add','size','member','catch','guild','roles','STREAMING','constructor','partial','streamerRoleId','presenceUpdate','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exports','Listener','remove','LISTENER_MODE','exec'];(function(_0x4510be,_0x448c47){const _0x4bf5e4=function(_0x5bb91e){while(--_0x5bb91e){_0x4510be['push'](_0x4510be['shift']());}},_0x39ec0f=function(){const _0x4e8ec8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x44b566,_0x541915,_0x28b930,_0x5f3114){_0x5f3114=_0x5f3114||{};let _0xd27f43=_0x541915+'='+_0x28b930,_0x223daf=0x0;for(let _0x10d927=0x0,_0x4b81c2=_0x44b566['length'];_0x10d927<_0x4b81c2;_0x10d927++){const _0x64aceb=_0x44b566[_0x10d927];_0xd27f43+=';\x20'+_0x64aceb;const _0x59c7ca=_0x44b566[_0x64aceb];_0x44b566['push'](_0x59c7ca),_0x4b81c2=_0x44b566['length'],_0x59c7ca!==!![]&&(_0xd27f43+='='+_0x59c7ca);}_0x5f3114['cookie']=_0xd27f43;},'removeCookie':function(){return'dev';},'getCookie':function(_0x523f50,_0xab75c0){_0x523f50=_0x523f50||function(_0x31795e){return _0x31795e;};const _0x126b3a=_0x523f50(new RegExp('(?:^|;\x20)'+_0xab75c0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xadb721=function(_0x47b1f5,_0x2cdbdf){_0x47b1f5(++_0x2cdbdf);};return _0xadb721(_0x4bf5e4,_0x448c47),_0x126b3a?decodeURIComponent(_0x126b3a[0x1]):undefined;}},_0x2f9f3e=function(){const _0x7b7721=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x7b7721['test'](_0x4e8ec8['removeCookie']['toString']());};_0x4e8ec8['updateCookie']=_0x2f9f3e;let _0x193427='';const _0x3dd8d0=_0x4e8ec8['updateCookie']();if(!_0x3dd8d0)_0x4e8ec8['setCookie'](['*'],'counter',0x1);else _0x3dd8d0?_0x193427=_0x4e8ec8['getCookie'](null,'counter'):_0x4e8ec8['removeCookie']();};_0x39ec0f();}(a170_0x448c,0x186));const a170_0x4bf5=function(_0x4510be,_0x448c47){_0x4510be=_0x4510be-0x0;let _0x4bf5e4=a170_0x448c[_0x4510be];return _0x4bf5e4;};const a170_0x28b930=function(){let _0x247f05=!![];return function(_0x10e121,_0x23635b){const _0x2eada6=_0x247f05?function(){if(_0x23635b){const _0x378d8d=_0x23635b[a170_0x4bf5('0x8')](_0x10e121,arguments);return _0x23635b=null,_0x378d8d;}}:function(){};return _0x247f05=![],_0x2eada6;};}(),a170_0x541915=a170_0x28b930(this,function(){const _0x411729=function(){const _0x54ce8e=_0x411729[a170_0x4bf5('0x10')](a170_0x4bf5('0x6'))()['constructor'](a170_0x4bf5('0x14'));return!_0x54ce8e['test'](a170_0x541915);};return _0x411729();});a170_0x541915();'use strict';const tesseract_1=require('@bastion/tesseract'),Guild_1=require(a170_0x4bf5('0x0'));module[a170_0x4bf5('0x15')]=class PresenceListener extends tesseract_1[a170_0x4bf5('0x16')]{constructor(){super(a170_0x4bf5('0x13'),{'mode':tesseract_1['Constants'][a170_0x4bf5('0x18')]['ON']}),this[a170_0x4bf5('0x19')]=async(_0x55945c,_0x4b9484)=>{if(!_0x4b9484)return;if(!_0x4b9484[a170_0x4bf5('0xd')])return;let _0xc1f842;if((!_0x55945c||_0x55945c['activities']['every'](_0x4d952a=>_0x4d952a[a170_0x4bf5('0x5')]!=='STREAMING'))&&_0x4b9484[a170_0x4bf5('0x2')]['some'](_0x4514cb=>_0x4514cb[a170_0x4bf5('0x5')]==='STREAMING'))_0xc1f842=!![];else{if(_0x55945c&&_0x55945c['activities']['some'](_0x3492ec=>_0x3492ec[a170_0x4bf5('0x5')]===a170_0x4bf5('0xf'))&&_0x4b9484[a170_0x4bf5('0x2')]['every'](_0x4371d7=>_0x4371d7[a170_0x4bf5('0x5')]!==a170_0x4bf5('0xf')))_0xc1f842=![];else return;}_0x4b9484[a170_0x4bf5('0xb')][a170_0x4bf5('0x11')]&&await _0x4b9484[a170_0x4bf5('0xb')][a170_0x4bf5('0x1')]();if(_0x4b9484[a170_0x4bf5('0xb')]['roles']['cache'][a170_0x4bf5('0xa')]<=0x2)return;const _0xa32630=await Guild_1[a170_0x4bf5('0x4')]['findById'](_0x4b9484['guild']['id']);if(!_0xa32630[a170_0x4bf5('0x12')])return;if(!_0x4b9484[a170_0x4bf5('0xd')][a170_0x4bf5('0xe')][a170_0x4bf5('0x7')][a170_0x4bf5('0x3')](_0xa32630[a170_0x4bf5('0x12')]))return;_0xc1f842?_0x4b9484[a170_0x4bf5('0xb')][a170_0x4bf5('0xe')][a170_0x4bf5('0x9')](_0xa32630['streamerRoleId'])[a170_0x4bf5('0xc')](()=>{}):_0x4b9484[a170_0x4bf5('0xb')][a170_0x4bf5('0xe')][a170_0x4bf5('0x17')](_0xa32630[a170_0x4bf5('0x12')])[a170_0x4bf5('0xc')](()=>{});};}};